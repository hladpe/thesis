# Úvod

# Cíl a metodika práce

# Teoretická východiska práce

## Internet
Internet je celosvětová síť (desítky tisíc jednotlivých sítí – možná i mnohem více) propojující všechny kontinenty, státy a města tak, že jakýkoliv počítač může kdykoliv komunikovat s jakýmkoliv jiným počítačem, ať je kdekoliv na planetě.
Internet nikdo neřídí, funguje díky tomu, že všichni lidé mají společný zájem – chtějí být propojeni [cit]https://datacentrum.wedos.com/a/17/co-je-internet-jak-funguje.html[/cit].

### Vznik internetu 
První předchůdce internetu (Arpanet), vznikl v roce 1969. Vytvořila ho instituce Advanced Research Project Agency (ARPA). Jeho vznik zaštiťovalo Ministerstvo obrany USA. Tato síť byla z počátku použita pouze pro vědecké účely, následně z ní vznikly dvě samostatné sítě - Arpanet a Milnet (armádní síť). V roce 1981 vnikla síť Bitnet, která propojovala americké vysoké a střední školy. Avšak v těchto sítích vznikl problém komunikace na různých platformách. Proto po intenzivních výzkumech vznikl protokol TCP/IP, který je používám dodnes. Samotný vznik internetu v podobě, jak ho známe dnes, je datován od roku 1993, kdy Tom Berners Lee vymyslel nový způsob výměny informací, ten je známý pod zkratkou WWW (World Wide Web) [cit]https://home.zcu.cz/~tisarova/[/cit].

Internet se v České republice začal rozšiřovat až na přelomu let 1995 a 1996, kdy na trh vstoupili komerční poskytovatelé internetového připojení. I přes to, že v těchto letech byla Česká republika připojena k internetu již 3 roky, ke komerčnímu používání internetu došlo až po pádu společnosti Eurotel, jejíž monopol se vztahoval mimo jiné i na veřejné služby přenosu dat [cit]https://home.zcu.cz/~tisarova/[/cit].

### Služby na internetu
Služeb na internetu lze využit celá řada. Zde jsou vysvětleny některé služby, které jsou hojně využívané pro komerční využití [cit]Sedláček, J. (2006).E-komerce, internetový a mobil marketing od A do Z. 1. vyd. Praha: BEN -technická literatura.[/cit].

#### World Wide Web (WWW)
Označení pro vzájemně provázený multimediální obsah poskytovaný pomocí protokolu HTTP. Uživatelé obsah konzumují pomocí webových prohlížečů [cit]https://is.muni.cz/do/ics/el/sitmu/law/html/sluzby-internetu.html[/cit].

#### E-mail
Zasílání textových zpráv mezi jednotlivými uživateli internetu je k dispozici již od raných dob internetu. Dnes je zajišťován pomocí protokolu SMTP, který byl vyvinut v 70. letech [cit]https://is.muni.cz/do/ics/el/sitmu/law/html/sluzby-internetu.html[/cit].

Díky své rychlosti, nízkým nákladům, pohodlí a snadnému archivování je dnes pro firmy základním komunikačním nástrojem. Lze mimo jiné možné například využít k potvrzení přijaté objednávky z internetového obchodu [cit]Sedláček, J. (2006).E-komerce, internetový a mobil marketing od A do Z. 1. vyd. Praha: BEN -technická literatura.[/cit].

#### Instant masseging (IM)
Instant messaging je technologie, která formou aplikace umožňuje uživatelům sledovat, kteří uživatelé jsou připojeni k síti a dle potřeby s těmito uživateli komunikovat, například zasláním zprávy (chatovat) nebo posílat soubory. Umožňuje tedy komunikovat přes síť mezi uživateli v reálném čase [cit]http://wiki.knihovna.cz/index.php/Instant_messaging[/cit].

Některé aplikace dovolují uživatelům i použití webových kamer a mikrofonů a díky tomu je služba ještě více populární. Pro některé uživatele je tato technologie přijatelnější, než okamžitá komunikace, protože ji vnímají méně dotěrnější, než například komunikace před telefon [cit]http://wiki.knihovna.cz/index.php/Instant_messaging[/cit].

#### Telefonování přes internet
Díky rozšíření internetu do firem, je možné telefonovat přes internet. Postupně tak vznikly 3 základní možnosti telefonování s využitím internetu - telefonování z počítače na počítač, z počítače na telefon a telefonování přes internet prostřednictvím mobilního telefonu. Hlavní výhodou telefonování přes internet je snížení nákladů na volání [cit]Sedláček, J. (2006).E-komerce, internetový a mobil marketing od A do Z. 1. vyd. Praha: BEN -technická literatura.[/cit].

#### Sociální služby
_„Sociální síť je internetová služba, která registrovaným uživatelům umožňuje komunikovat mezi sebou. Komunikace může být veřejná nebo soukromá, je zpravidla založena na sdílení textových příspěvků, fotografií a videa“_ [cit]https://www.zive.cz/socialni-site/sc-223/default.aspx[/cit].

### Webový prohlížeč
Webový prohlížeč je program v počítači, který dokáže zobrazit webovou stránku. Existuje jich několik, např. Internet Explorer, Mozilla Firefox, Chrome, Safari, Opera a další [cit]https://www.helpmark.cz/slovnikpojmu/33-internetovy-prohlizec[/cit].

### Webová stránka
Webová stránka je označení dokumentu s informacemi, který je dostupný pomocí internetu a webového prohlížeče a pro návštěvníka webové stránky je prezentován estetickým a čitelným způsobem [cit]Webová stránka (Internetová stránka). Management Mania [online]. 2012 [cit. 2016-04-01]. Dostupné z: https://managementmania.com/cs/webova-stranka-internetova[/cit].

Webové stránky se používají pro různé účely, jak pro individuální použití, tak firemní a mohou být buď statické, nebo dynamicky generované.[cit]Definice statické webové stránky. Myartse.com [online]. 2014 [cit. 2016-04-01]. Dostupné z: http://www.myartse.com/definice-staticke-webove-stranky/[/cit].

Statická webová stránka je stránka, kde je veškerý obsah pevně kódován do samotné stránky. Tyto stránky jsou obvykle kódované pouze za použití HTML (HyperText Markup Language)[cit]Definice statické webové stránky. Myartse.com [online]. 2014 [cit. 2016-04-01]. Dostupné z: http://www.myartse.com/definice-staticke-webove-stranky/[/cit].

Dynamické webové stránky jsou generovány skriptem, který sám sestavuje HTML dokument. Tento dokument může vygenerovat například za použití dat z databáze. Dynamické webové stránky lze vytvářet za použití několika programovacích jazyků, včetně PHP[cit]Definice statické webové stránky. Myartse.com [online]. 2014 [cit. 2016-04-01]. Dostupné z: http://www.myartse.com/definice-staticke-webove-stranky/[/cit].

### Hypertext
_„Text, ve kterém fungují některé výrazy jako odkazy. Prostřednictvím těchto odkazů se přenesete na jinou část dokumentu nebo na úplně nový dokument“_ [cit]https://it-slovnik.cz/pojem/hypertext[/cit].

## E-business
_„Elektronické podnikání (e-business) je oborem, který zaznamenal velmi rychlý vývoj. Zpočátku byl e-business chápán pouze jako internetové obchody, rezervační systémy apod., tedy aktivity, které jsou dnes označovány jako elektronické obchodování (e-commerce). E-business má širší význam a patří sem i mnoho dalších aktivit, jejichž cílem je zejména podpora a zvýšení efektivity podnikových interních a externích procesů. Na stejnou úroveň jako firmy se v rámci e-business řadí i běžní uživatelé, kteří jsou na jedné straně klíčovou cílovou skupinou z hlediska elektronicky realizovaných obchodů, na druhé straně využívají Internet a jeho služby pro účely vzdělávání, zábavy nebo například pro pracovní účely“_ [cit]SUCHÁNEK, P. E-commerce: elektronické podnikání a koncepce elektronického obchodování. 1. vyd. Praha: Ekopress, 2012. 144 s. ISBN 978-80-86929-84-2.[/cit].

![Části elektronického podnikání, zdroj: vlastní zpracování dle [cit]SUCHÁNEK, P. E-commerce: elektronické podnikání a koncepce elektronického obchodování. 1. vyd. Praha: Ekopress, 2012. 144 s. ISBN 978-80-86929-84-2.[/cit]. || width=0.75\textwidth](https://hanabrand.cz/temp/dp/e-commerce-skupiny.png)

### E-commerce
E-commerce je široký pojem, který se používá k označení veškerých obchodních transakcí realizovaných pomocí internetu a elektronických prostředků. E-commerce patří do rodiny e-business (elektronického podnikání)[cit]http://www.adaptic.cz/znalosti/slovnicek/e-commerce/[/cit].

Pro e-commerce jsou důležité digitální obchodní transakce mezi organizacemi a mezi jednotlivci. Digitální transakce zahrnují všechny transakce zprostředkované prostřednictvím digitálních technologií. Z velké části to jsou transakce, ke kterým dochází přes internet. Obchodní transakce zahrnují výměnu hodnoty (např. peněz) přes organizační nebo individuální hranice za produkty a služby. Výměna hodnoty je důležitá pro pochopení hranic elektronického obchodu - bez výměny hodnoty nedochází k žádnému obchodu [cit]LAUDON, K. C. and C. G. TRAVER. E-Commerce 2016: Business, Technology, Society. 12th ed. New Jersey: Pearson, 2016. 912 p. ISBN 978-0-133-93895-1.[/cit].

### E-shop
E-shop je elektronický internetový obchod v podobě speciální webové aplikace, která slouží ke zprostředkování obchodních transakcí prostřednictvím internetu [cit]http://www.adaptic.cz/znalosti/slovnicek/e-shop/[/cit].

Základem je katalog výrobků, který je obvykle řazený do kategorií. V těchto kategoriích se pak nacházejí jednotlivé produkty, které jsou nabízeny zákazníkovi k zakoupení. Ze  zákona musí být na e-shopu také další informace, jako jsou například kontaktní údaje, obchodní podmínky apod. Poté, co si uživatel vybere svůj produkt, dochází k nákupnímu procesu. Prvním krokem je přidání produktu do tzv. košíku (elektronická podoba klasického nákupního košíku), zde se shromažďují vybrané produkty. Poté uživatel vyplní doručovací a fakturační údaje (v některých případech lze využít uživatelský účet a uživatelovy údaje jsou doplněny automaticky). Propracovanější e-shopy dolují i například odložit nákup na později nebo zaplatit rovnou pomocí platební karty [cit]http://www.adaptic.cz/znalosti/slovnicek/e-shop/[/cit].

### Modely e-commerce
_„Existují čtyři základní modely elektronického obchodování, které využívají prostředí internetu a možnosti moderních informačních a komunikačních technologií. Modely jsou definovány pomocí směru marketingové komunikace - od koho vychází a komu je určena“_ [cit]https://managementmania.com/cs/e-commerce[/cit].

_„Patří sem i většina činností spadajících pod elektronický marketing, např. online reklama, email marketing, nejrůznější affiliate programy a všechny aktivity na podporu internetového obchodování. V širším pojetí mohou do pojmu e-commerce patřit i jakékoliv webové stránky, které nabízí konkrétní produkty či služby a umožňují i jejich objednávku například emailem“_ [cit]https://managementmania.com/cs/e-commerce[/cit].

#### B2B (Business to Business)
B2B označuje obchodní vztah mezi dvěma podniky. Tento obchodní vztah se odehrává zpravidla prostřednictvím internetu. Typické pro řešení tohoto obchodního vztahu je elektronická výměna dat, například fakturace, řízení skladů, online bankovnictví, online katalogy, online aukce a propojování podnikových informačních systémů [cit]https://managementmania.com/cs/business-to-business[/cit].

Týká se firem, které chtějí nakupovat (například materiál nebo zboží) z důvodu zisku. Poptávka je ovlivněna množstvím zakázek, které má jeden z partnerů [cit]https://www.altaxo.cz/provoz-firmy/marketing/co-jsou-zkratky-b2c-b2b-b2g-b2e[/cit].

Tento obchodní vztah nemá přímý vliv na konečného spotřebitele. Nejdůležitějším úkonem v B2B marketingu patří budování důvěry [cit]https://mladypodnikatel.cz/b2b-b2c-b2g-c2b-b2a-b2e-b2r-c2c-c2g-g2b-g2c-g2g-t950[/cit].

#### B2C (Business to Customer)
B2B je označení pro model elektronického podnikání, který se zaměřuje na koncové klienty. Protikladem je B2B business. Iniciativa k obchodu vychází směrem od podniku a cílovou skupinou jsou zákazníci (spotřebitelé). Obchodní vztah se odehrává prostřednictvím internetu. Internetové stránky zprostředkovatelů jsou zákazníkům snadno dostupné a mohou nabízet zákazníkům informace a jednoduchý způsob nákupu. Internet umožňuje zákazníkům porovnávat nabídky různých prodejců [cit]https://managementmania.com/cs/business-to-customer[/cit].

Samotná kategorie je rozdělena do tří kategorií. Do první kategorie spadá informování potenciálního zákazníka o produktech. Druhou kategorií je získávání zpětné vazby skrz různé formuláře. Třetí a největší kategorií je uzavření celého obchodu s možností objednání a zaplacení zboží
[cit]https://mladypodnikatel.cz/b2b-b2c-b2g-c2b-b2a-b2e-b2r-c2c-c2g-g2b-g2c-g2g-t950[/cit].

B2C je zřejmě nejrozšířenější forma internetového podnikání. Jedná se o přímý prodej a podpora zákazníkovi [cit]https://www.altaxo.cz/provoz-firmy/marketing/co-jsou-zkratky-b2c-b2b-b2g-b2e[/cit].

#### C2B (Customer to Business)
C2B je model elektronického podnikání, kdy iniciativa pochází od zákazníků (spotřebitelů) směrem k firmám. Zákazníci kontaktují firmy a vznášejí dotazy, podněty a náměty, například pro inovaci výrobků nebo služeb firmy. Takový model lze podpořit například zřízením diskuzního fóra nebo účet na sociálních sítích [cit]https://managementmania.com/cs/customer-to-business[/cit].

#### C2C (Customer to Customer)
C2C je druh elektronického obchodování, ve kterém probíhá obchodní vztah mezi dvěma spotřebiteli a to většinou prostřednictvím třetí strany. Iniciativa přitom vychází od jednoho spotřebitele směrem k jinému spotřebiteli. Příkladem takovýchto obchodních vztahů jsou například online burzy, aukce a výměny zboží [cit]https://managementmania.com/cs/customer-to-customer[/cit].

### Vývoj e-commerce
_„Nakupování online je globální a rapidně rostoucí fenomén. Na světě žije téměř 7,5 mld. lidí, z toho 3,5 mld. lidí používá internet a přes 1,5 miliardy lidí nakupuje online“_ [cit]http://www.edotace.cz/clanky/e-commerce-svetovy-obchod-online[/cit].

Nakupování zboží a služeb přes internet se stává samozřejmostí. Svědčí o tom neustále rostoucí počet nákupů online a díky tomu i stále se zvyšující tržby online obchodů. Vedle klasických e-shopů se rozvíjí i další internetové služby související s internetovým prodejem, jako jsou například zásilkovny (uloženky), kde je možné si objednané zboží vyzvednout. Dále se rozvíjí i rozvážkové služby, například rozvoz jídel nebo potravin. Spolu s internetovým prodejem se rozvíjí i srovnávače cen, agregátory nabídek zboží nebo služeb a další [cit]http://www.edotace.cz/clanky/e-commerce-svetovy-obchod-online[/cit].

Pro e-commerce hraje velkou roli sezónnost prodeje s velkým významem vánoc - obvykle e-shopy utrží za poslední 4 měsíce přibližně stejně, jako za předchozích 8 měsíců. V poslední jsou ale sezónní rozdíly vyrovnávány nákupy zboží denní potřeby. Nejslabšími měsíci v tržbách e-shopů jsou většinou letní měsíce [cit]http://www.edotace.cz/clanky/e-commerce-svetovy-obchod-online[/cit].

_„Podle serveru eMarketer se maloobchodní globální online tržby přiblížily v roce 2016 úrovni 1,9 bilionu dolarů a do roku 2020 by se měly zdvojnásobit na 4 bil. dolarů. I tak se e-commerce tržby budou podílet na celkových maloobchodních tržbách jen 14,6 %. Největším světovým online trhem je Čína, jejíž podíl poroste i do budoucna. Následuje online trh v USA“_ [cit]http://www.edotace.cz/clanky/e-commerce-svetovy-obchod-online[/cit].

### E-commerce v České republice
Dlouhodobě roste počet Čechů s přístupem k internetu. V roce 2016 se počet uživatelů internetu v České republice oproti roku 2010 zvýšil zhruba o 15 % a díky tomu se Česká republika počtem uživatelů internetu přiblížila průměru v Evropské unii [cit]http://www.edotace.cz/clanky/e-commerce-svetovy-obchod-online[/cit].

_„Mezi ekonomicky aktivními, vysokoškolsky vzdělanými a mladými do 30 let užívají dnes internet už téměř všichni“_ [cit]http://www.edotace.cz/clanky/e-commerce-svetovy-obchod-online[/cit].

V roce 2016 mělo 76,1 % domácností v České republice přístup k internetu. Také roste obliba v nakupování přes internet. V roce 2007 podle průzkumu ČSÚ za poslední rok nakoupilo přes internet 15 % obyvatel starších 16 let. V roce 2010 jich nakoupilo již 25 % a v roce 2017 již 43 % [cit]http://www.edotace.cz/clanky/e-commerce-svetovy-obchod-online[/cit].

## E-commerce z pohledu obchodníků
Hlavní výhodou pro provozovatele e-shopů je široká působnost a v podstatě neomezená otevírací doma. E-shop může s přehledem prodávat po celé zemi (a v mnoha případech i za hranicemi). Internetový obchod tedy nemusí být limitován žádným konkrétním místem. Široká působnost se pak pozitivně odráží v marketingu, kdy umožňuje širší širší zásah při nižších nákladech na propagaci. Na internetu lze snadno měřit efektivitu reklamy a konfigurovat ji v závislosti na těchto výsledcích a potřebách zákazníka [cit]https://www.podnikatel.cz/clanky/prectete-si-hlavni-vyhody-a-nevyhody-e-shopu-jak-je-vidi-jejich-provozovatele/[/cit].

Na e-shop lze uvést o produktu mnoho informací a nabídnout i komponenty a substituty konkrétního produktu. Zároveň mají v porovnání s kamennými prodejnami i nižší náklady na provoz. Ale i zde platí, že čím více se bude byznys rozšiřovat, tím se budou i náklady na provoz přibližovat k nákladům za provoz kamenné prodejny [cit]https://www.podnikatel.cz/clanky/prectete-si-hlavni-vyhody-a-nevyhody-e-shopu-jak-je-vidi-jejich-provozovatele/[/cit].

Jako určitou nevýhodu lze na internetu označit ceny produktů. Díky cenovým srovnávačům může zákazník jednoduše vidět cenové rozdíly s konkurencí. Pokud by chtěl srovnávat ceny zboží v kamenných prodejnách, stálo by to zákazníka mnohem více úsilí a času, proto si lze v kamenných prodejnách dovolit vyšší cenu produktu oproti konkurenci [cit]https://www.podnikatel.cz/clanky/prectete-si-hlavni-vyhody-a-nevyhody-e-shopu-jak-je-vidi-jejich-provozovatele/[/cit].

### Založení a provoz e-shopu
Základní kroky, které jsou potřeba podniknout k založení a úspěšnému provozování e-shopu, kterými by se měli podnikatelé zakládající e-shop zabývat:
- vypracovat podnikatelský plán (včetně cílů, strategií a financování),
- právní ošetření podnikání, registrace na příslušných úřadech,
- výběr technického řešení e-shopu (open-source, programování na zakázku, pronájem)
- výběr a nákup vhodné domény a poskytovatele hostingových služeb,
- výběr vhodných dodavatelů (výrobků i spotřebního materiálu),
- zajištění vhodné formy distribuce,
- promyslet koncept e-shopu (struktura, funkce, bezpečnost, dostupnost),
- vytvoření vzhledu a účelného obsahu (copyright, SEO, obchodní podmínky) [cit]Sedlák, M., Mikulášková, P. (2012). Jak vytvořit úspěšný a výdělečný internetový obchod. 1. vyd. Brno: Computer Press.[/cit].

#### Open-source
Největším lákadlem řešení open-cource je jeho cena, protože toto řešení je zdarma. Zdarma jsou základní moduly, které vystačí na běžné potřeby e-shopu. Zdarma mohou být i další rozšíření a pluginy. Další výhodou je otevřený kód, který lze libovolně modifikovat a rozvíjet dle vlastních požadavků. Open-source e-commerce řešení tedy využijí ti, kteří chtějí levný, jednoduchý e-shop a nebudou požadovat víc, než jsou jeho základní funkce. Dále toto řešení využijí ti, kteří chtějí použít otestované řešení jako solidní základ pro vlastní platformu, kterou budou dále chtít sami rozvíjet [cit]https://mladypodnikatel.cz/open-source-reseni-pro-e-shop-kdy-ho-zvolit-a-jak-se-pri-vyberu-nespalit-t33530[/cit].

Open-source ale neznamená e-shop zdarma nebo nulové náklady. I správa svobodného softwaru bude potřebovat zkušeného vývojáře, který se dokáže orientovat v cizím kódu, zná architekturu aplikace a aby požadovanou úpravu provedl dobře a nezanesl do aplikace další chyby [cit]https://mladypodnikatel.cz/open-source-reseni-pro-e-shop-kdy-ho-zvolit-a-jak-se-pri-vyberu-nespalit-t33530[/cit]

Bohužel se svobodný software v sobě ukrývá i své nevýhody - kolísající kvalita kódu a dostupnost podpory. Díky tomu, že lze do kódu libovolně zasahovat, žádné open-source řešení nezaručí, že bude fungovat bez chyb a nečekaných pádů. Veřejně přístupný kód také přitahuje pozornost útočníků, kteří vyhledávají bezpečnostní chyby [cit]https://mladypodnikatel.cz/open-source-reseni-pro-e-shop-kdy-ho-zvolit-a-jak-se-pri-vyberu-nespalit-t33530[/cit].

#### E-shop na míru
E-shop na míru má tu výhodu, že přesně odpovídá požadavkům zadavatele. Na počátku může zadavatel přesně specifikovat, jakou funkcionalitu požaduje. Tím se například liší od krabicového řešení, protože vznikne systém, který přesně splňuje potřeby zadavatele [cit]https://www.shoptet.cz/tvorba-e-shopu-na-miru/[/cit].

E-shop na míru je ale poměrně drahá varianta k vytvoření vlastního e-shopu. Většinou se tak spíše vyplatí u velkých společností, kteří mají dostatek peněz na takovouto investici [cit]https://www.shoptet.cz/tvorba-e-shopu-na-miru/[/cit].

_„E-shop na míru je pro podnikatele ta nejlepší varianta pod podmínkou, že na ni má“_ [cit]https://www.desitka.cz/text-proc-si-ne-poridit-e-shop-na-miru/[/cit]

#### Pronájem e-shopu
Pronájmu e-shopu se také říká krabicové řešení e-shopu. Lze s ním začít podnikat téměř okamžitě, pronajímají se za danou měsíční částku. Krabicově řešené e-shopy jsou již hotové a funkční. Stačí je jen nastavit a naplnit produkty. Mezi hlavní výhody patří minimální starosti s e-shopem, bezpečnost, spolehlivost a dopředu stanovená cena pronájmu. Nevýhodami tohoto řešení je menší možnost úprav a fakt, že e-shop nepatří nájemníkovi. Je tedy vhodnou formou k vytvoření e-shopu spíše začínajícím podnikatelům [cit]https://www.desitka.cz/text-proc-si-ne-poridit-e-shop-na-miru/[/cit].

### Online marketing
Online marketing je označení pro propagaci produktů nebo služeb na internetu [cit]https://www.mioweb.cz/slovnicek/online-marketing/[/cit].


**Rozdělení online marketingu:**
- inbound marketing – dlouhodobé formování a podpora vztahu s potenciálními zákazníky, například pomocí různého obsahu pomáhá, vzdělává nebo baví (populární obsahový marketing),
- outbound marketing - zaměřuje se naopak na efektivní propagaci produktu neb služby [cit]https://www.mioweb.cz/slovnicek/online-marketing/[/cit].


**Hlavní nástroje online marketingu:**
- internetové stránky - jádro prezentace na internetu,
- sociální sítě - oslovování potenciálních zákazníků přes udržované a aktualizované stránky s poutavými příspěvky nebo reklamou,
- e-mail marketing - dlouhodobě úspěšná metoda založená na prohlubování vztahu mezi odesílatelem a příjemcem (potenciálním zákazníkem) například formou newsletterů,
- PPC kampaně - (výkonnostní marketing) umístění textových sdělení nebo bannerů v obsahové nebo vyhledávací síti, čímž si inzerent získává pozornost uživatelů,
- affiliate marketing - získávání nových zákazníků od partnerů pomocí provozního systému,
- SEO - optimalizace pro vyhledávače, optimalizace faktorů ovlivňujících zviditelnění webu ve výsledcích vyhledávání [cit]https://www.mioweb.cz/slovnicek/online-marketing/[/cit].

## E-commerce z pohledu zákazníků
_„Internet je jako obchodní místo unikátní hned v několika směrech: např. koncentrace obchodů na jednom místě. Všechny jsou okamžitě dosažitelné, nekoupím-li v prvním, mohu bez námahy pokračovat v objevování další nabídky, jako kdybych jel na druhý konec města nebo dokonce světa. Existuje možnost rychlého porovnání sortimentu a cen. Rychlý přehled konkurence v oboru, jen na základě zadání třeba jednoho klíčového slova“_ [cit]https://www.interval.cz/clanky/e-shop-z-pohledu-zakaznika/[/cit].

### Výhody a omezení
Základní výhody e-commerce pro zákazníky:
- nižší ceny produktů a služeb, možnost okamžitého srovnání cen s konkurencí,
- možnost většího výběru produktů a obchodníků, 
- větší pohodlí a úspora času - snadná dostupnost k nákupu, možnost nakupovat kdykoli a odkudkoli,
- snadné získání detailních informací o produktů a službách,
- možnost rychlého dodání,
- slevy a výhody pro zákazníky [cit]Švadlenka, L., Madleňák, R. (2007). Elektronické obchodování. Pardubice: Institut Jana Pernera[/cit].

Základní nevýhody e-commerce pro zákazníky:
- zákazníci si nemohou zboží osahat a ozkoušet,
- nabízené zboží není skladem,
- někteří zákazníci se bojí problémů s reklamací nebo vrácením zboží,
- obava ze zneužití kreditní karty,
- zákazník potřebuje poradit s výběrem zboží a nemá se na koho obrátit [cit]https://www.danielnytra.cz/eshop-testovano-na-lidech/[/cit].

### Důvěryhodnost e-shopu
Během pouhých prvních pár vteřin návštěvník internetových stránek zhodnotí, zda je pro něj e-shop důvěryhodný a zajímavý.  Navíc je pro zákazníky velice důležité, komu poskytnou osobní údaje a informace o platební kartě. Z toho důvodu je potřeba, aby webové stránky působily důvěryhodně [cit]https://blog.eshop-rychle.cz/duveryhodnost-bezpecnost-eshopu-https/[/cit].


**Doporučované základní úpravy pro obecné zvýšení důvěryhodnosti e-shopu:**
- propracovaný design webu, aktualizovaný jednoduchý přehledný a nepříliš agresivní vzhled,
- vizuální kontakt s člověkem nebo maskotem,
- aktuálnost e-shopu,
- zakomponování bezpečnostního symbolu,
- přidání možnosti snadného kontaktu [cit]https://www.radeksikyr.cz/blog/6-uprav-kterymi-zvysite-duveryhodnost-e-shopu/[/cit]


_„Důvěryhodný je takový e-shop, který působí moderně, aktivně, stará se o své zákazníky a umožňuje jim kontakt, kdykoli je potřeba. Zároveň za ním stojí konkrétní sympatičtí lidé s příběhem. Zapracujte tyto úpravy na svůj e-shop a uvidíte pozitivní vliv na obrat i pokles míry okamžitého opuštění stránek. A pokud chcete získat ještě více objednávek, nezapomeňte vytvořit perfektní stránku O nás“_ [cit]https://www.radeksikyr.cz/blog/6-uprav-kterymi-zvysite-duveryhodnost-e-shopu/[/cit].

## Hypertext Markup Language – HTML
HTML je značkovací jazyk pro hypertext. Je jedním z jazyků, které umožňují vytvářet dokumenty, které je pak možné publikovat na internetu. Je definován množinou značek a jejich atributů. Mezi značky se uzavírají části textu a tím se určuje význam obsaženého textu. Jednotlivé značky se uzavírají mezi úhlové závorky „<“ a „>“. Součástí elementu mohou být v obsahu další vnořené elementy. Pomocí atributů se elementu doplňují informace, které definují vlastnosti elementu [cit]https://www.stargen.cz/slovnik/HTML/[/cit].

Značky neboli „tagy“ mohou být párové a nepárové. Párové značky se uzavírají koncovou značkou, která je shodná s počáteční, akorát se před názvem vpisuje znak lomítka „/“ [cit]https://www.stargen.cz/slovnik/HTML/[/cit].

## CSS
CSS (Cascading Style Sheets - kaskádové styly) je zápis, který určuje vzhled (barvy, dekorační obrázky, rozmístění prvků) HTML dokumentu [cit]http://www.pestujemeweb.cz/obsah/css/co-je-css.php[/cit].

### CSS Preprocesor
CSS nabízí možnost jak strukturovat styly uvnitř souboru. Vždy musí být uveden jeden nebo více CSS selektorů, po kterých musí následovat blok s výčtem vlastností, které se mají pro dané selektory aplikovat. Díky tomu mohou vznikat dlouhé řetězce selektorů. CSS také nenabízí možnost využití proměnných, například pro aplikaci hodnot, které se ve stylech opakují. CSS preprocesory tyto a další nedostatky obyčejného CSS eliminují a poskytují mnohem více funkcí, než klasické CSS. Ve výsledku je pak zápis přeložen do klasického CSS tak, aby mohlo být využitelné pro nastylování HTML dokumentu [cit]https://www.itnetwork.cz/html-css/webdesign/less-css-preprocesor[/cit].

Mezi CSS preprocesory patří například LESS nebo Sass [cit]https://www.zdrojak.cz/clanky/css-preprocesory-mene-psani-vyssi-efektivita/[/cit].

## Hypertext Preprocesor – PHP
_„PHP je programovací jazyk, který pracuje na straně serveru. S PHP můžete ukládat a měnit data webových stránek. Původní význam zkratky PHP byl Personal Home Page. Vzniklo v roce 1996, od té doby prošlo velkými změnami a nyní tato zkratka znamená PHP: Hypertext Preprocessor”_ [cit]https://www.tvorba-webu.cz/php/[/cit].

Je nejoblíbenějším skriptovacím jazykem na straně serveru v oblasti webového vývoje. Pohání téměř 78,9 % webových stránek. Tento jazyk vyvíjí skupina vývojářů s názvem The PHP Group a ta ho zdarma distribuuje jako volně dostupný skriptovací jazyk. Lze jej zprovoznit téměř na všech operačních systémech a na všech platformách [cit]HOPKINS, C. a O. BAŠE. PHP okamžitě. 1. vyd. Brno: Computer Press, 2014. 134 s. ISBN 978-80-251-4196-0.[/cit].

Jazyk je určen pro zpracování dat tak, aby je bylo možné dynamicky zobrazovat na webových stránkách - provádění matematických výpočtů, převádění formátů a spolupráce s databázemi. Díky tomu umožňuje transformovat statické stránky tak, aby reagovaly na uživatelské podněty [cit]HOPKINS, C. a O. BAŠE. PHP okamžitě. 1. vyd. Brno: Computer Press, 2014. 134 s. ISBN 978-80-251-4196-0.[/cit].

### Interpretace jazyka
PHP je imperativní (procedurální) interpretovaný multiparadigmatický programovací jazyk [cit]VORÁČEK, Jan. Skriptovací jazyky pro tvorbu webových aplikací. Pardubice, Dostupné také z: http://blog.voracek.net/wp-content/uploads/2013/09/JanVoracek_SkriptovaciJazykyProTvorbuWebovychAplikaci.pdf. Diplomová práce. Univerzita Pardubice. Vedoucí práce Ing. Michael Bažant, Ph.D.[/cit].
Imperativní programovací jazyk je jazyk, který k řešení úlohy tedy využívá algoritmu (postup, jak se má daná úloha vyřešit) [cit]VORÁČEK, Jan. Skriptovací jazyky pro tvorbu webových aplikací. Pardubice, Dostupné také z: http://blog.voracek.net/wp-content/uploads/2013/09/JanVoracek_SkriptovaciJazykyProTvorbuWebovychAplikaci.pdf. Diplomová práce. Univerzita Pardubice. Vedoucí práce Ing. Michael Bažant, Ph.D.[/cit].

Interpretovaný programovací jazyk je jazyk, který je do strojového kódu překládán až za běhu programu (tím se liší od kompilovaných, kde se před spuštěním musí zdrojový kód překompilovat pomocí kompilátoru do strojového kódu a až potom spuštěn). Zdrojový kód se za běhu překládá pomocí interpretu a ten příkazy při překladu zároveň provádí (po částech) [cit]Programovací jazyky. Programování [online]. 2015 [cit. 2016-04-01]. Dostupné z: http://k-prog.wz.cz/progjaz/[/cit].
Multiparadigmatický programovací jazyk je jazyk, který podporuje více jak jedno programovací paradigma [cit]VORÁČEK, Jan. Skriptovací jazyky pro tvorbu webových aplikací. Pardubice, Dostupné také z: http://blog.voracek.net/wp-content/uploads/2013/09/JanVoracek_SkriptovaciJazykyProTvorbuWebovychAplikaci.pdf. Diplomová práce. Univerzita Pardubice. Vedoucí práce Ing. Michael Bažant, Ph.D.[/cit].

Programovacím paradigmem si lze představit základní programovací styl, ve kterém je program naprogramován. Rozdíl je v pojmech a abstrakcích, které tvoří prvky programu (objekty, funkce, proměnné, omezení atd.). Programovací paradigma rozlišujeme na: aspektově orientované, deklarativní (funkcionální, logické), generické, imperativní, paralelní a strukturované (objektově orientované, rekurzivní) [cit]Programovací MEDIACENTRUM paradigma. GROUP, Naprogramuj 2013 [cit. mi.cz [online]. 2016-04-01]. Brno-sever: Dostupné z: http://naprogramujmi.cz/programovaci-paradigma/[/cit].

### Možnosti jazyka
PHP má spoustu možností pro práci, dokáže pracovat s databázemi, s velkým množstvím internetových protokolů (např. IMAP, POP3, SMTP atd.), dokáže vytvářet (editovat) soubory a obsahuje spoustu funkcí na zpracování řetězců. PHP je zdarma a volně šiřitelné [cit]Programovací jazyky. Programování [online]. 2015 [cit. 2016-04-01]. Dostupné z: http://k-prog.wz.cz/progjaz/[/cit].

## JavaScript
JavaScript je multiplatformní a objektově orientovaný, odlehčený skriptovací jazyk, který se spouští na hostovaném zařízení (např. webový prohlížeč). Může se vázat na objekty hostovaného prostředí a může tak poskytovat prostředky pro jejich ovládání [cit]Introduction – JavaScript. MDN [online]. 2015 [cit. 2016-12-12]. Dostupné z: https://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide/Introduction[/cit].

Neobsahuje statické typování proměnných, ani silnou typovou kontrolu jako v některých jiných programovacích jazycích [cit]Introduction – JavaScript. MDN [online]. 2015 [cit. 2016-12-12]. Dostupné z: https://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide/Introduction[/cit].

Umožňuje manipulovat s prvky webové stránky pro její oživení. Je tedy základem dynamického webu [cit]https://www.tvorba-webu.cz/javascript/[/cit].

### Asynchronous JavaScript and XML – AJAX
AJAX (česky „asynchronní JavaScript a XML“) je populární způsob pro tvorbu vysoce interaktivních aplikací. Základní princip je aktualizovat pouze části stránky bez nutnosti načítání a vykreslování celé stránky [cit]KOSEK, Jiří. PHP a XML. Vyd. 1. Praha: Grada, 2009. ISBN 978-80-247-1116-4.[/cit].

_„AJAX však dovoluje poslat pomocí JavaScriptu separátní HTTP požadavek a data, která nám server vrátí, pak můžeme v JavaScriptu libovolně dále zpracovávat – např. je pomocí DOM zaintegrovat do právě zobrazované stránky. Lze tak interaktivně aktualizovat pouze část stránky”_ [cit]KOSEK, Jiří. PHP a XML. Vyd. 1. Praha: Grada, 2009. ISBN 978-80-247-1116-4.[/cit].

## Objektové programování
_„Objektově orientované programování (dále jen OOP) nevzniklo náhodou, ale je důsledkem vývoje, který k němu směřoval. Jedná se o moderní metodiku vývoje softwaru, kterou podporuje většina programovacích jazyků. Častou chybou je, že se lidé domnívají, že OOP se využívá pouze při psaní určitého druhu programů a jinak je na škodu. Opak je pravdou – OOP je filosofie, je to nový pohled na funkci programu a komunikaci mezi jeho jednotlivými částmi. Mělo by se používat vždy, ať už děláme malou utilitku nebo složitý databázový systém. OOP není jen technika nebo nějaká doporučená struktura programu, je to hlavně nový způsob myšlení, nový náhled na problémy a nová éra ve vývoji softwaru”_ [cit]https://www.itnetwork.cz/php/oop/php-tutorial-uvod-do-objektove-orientovaneho-programovani[/cit].

Objektem je myšlen soubor dat a funkcí, čímž je patrný velký rozdíl objektového a strukturovaného programování, kdy strukturované od sebe přísně odděluje data a funkce [cit]KOFLER, Michael a ÖGGL, Bernd, PHP 5 a MySQL 5: Průvodce webového programátora. Vyd. 1. Brno: Computer Press, 2007. ISBN 978-80-251-1813-9[/cit].

### Objekt
Je základní jednotkou, která dokáže udržovat svůj stav a integrovat s okolím zasíláním a přijímáním zpráv [cit]KULHAN, Jakub. OOP v PHP. Programujte.com [online]. 2009 [cit. 2016-04-01]. Dostupné z: http://programujte.com/clanek/2009113001-oop-v-php/[/cit].

### Atributy
Atributy jsou vlastnosti neboli data (proměnné), která objekt v sobě uchovává. Někdy se o nich hovoří jako o vnitřních stavech objektu [cit]https://www.itnetwork.cz/php/oop/php-tutorial-prvni-objektova-aplikace[/cit].

### Metody
Metody jsou schopnosti, které je objekt schopen vykonávat. Mohou mít parametry a mohou vracet hodnotu stejně jako funkce. Metoda se od funkce liší tím, že metoda patří objektu, zatímco funkce nepatří žádnému objektu (to je také problém neobjektového programování) [cit]https://www.itnetwork.cz/php/oop/php-tutorial-prvni-objektova-aplikace[/cit].

### Třída
Aby bylo možné vytvořit objekt, je nutné nejdříve vytvořit třídu. Třída je vzor, podle kterého se objekty vytvářejí, definuje vlastnosti a schopnosti. Objekt, který se vytvoří podle třídy, se nazývá instance. Instance mají stejné rozhraní jako třída, podle kterého se vytvoří, ale navzájem se liší svými atributy [cit]https://www.itnetwork.cz/php/oop/php-tutorial-prvni-objektova-aplikace[/cit].

## Framework
Jedním z hlavních společných cílů při programování by měl být šetřit si práci. Toho dosahujeme použitím správných návrhů funkcí, metod a tříd, které lze uplatnit na více místech. Tohoto cíle lze také dosáhnout použitím existujících osvědčených a optimalizovaných knihoven a nástrojů [cit]VRÁNA, Jakub. 1001 tipů a triků pro PHP. Vyd. 1. Brno: Computer Press, 2010. ISBN 978-80-251-2940-1.[/cit].

Framework je ucelený soubor tematicky zaměřených knihoven, které ulehčují práci při programování aplikací. To zajišťuje psaní méně kódu, kód je přehlednější a rychlejší vývoj aplikace. Většina frameworků pracuje s architekturou MVC, která rozděluje aplikaci na nezávislé vrstvy [cit]LÁNG, Peter. Co je to framework? Webárna [online]. 2007 [cit. 2016-04-01]. Dostupné z: http://langi.cz/webarna/co-je-to-framework[/cit].

_„Z praktických zkušeností vám mohu s klidem říci, že pokud programujete v čistém PHP, tak je asi 50 % vašeho kódu nepotřebný balast. S použitím kvalitních knihoven napíšete aplikaci za polovinu času a s polovičním počtem řádků. Aplikace bude snadno udržovatelná a její tvorba vás bude bavit. Nebudete stále vynalézat kolo a řešit ty samé rutinní záležitosti (jako např. jak ověřit, zda je uživatel administrátor), budete se naopak věnovat vymýšlení zajímavých funkcí té dané aplikace a o tom programování přeci je“_ [cit]https://www.itnetwork.cz/php/nette/zaklady/uvod-do-php-frameworku-nette/[/cit].

## MVC architektura
MVC architektura neboli architektura Model-View-Controller, je architektura budování aplikace, která oddělí aplikaci na 3 logické části [cit]https://www.stargen.cz/slovnik/HTML/[/cit].

_„Základní myšlenkou MVC architektury je oddělení logiky od výstupu. Řeší tedy problém tzv. "špagetového kódu", kdy máme v jednom souboru (třídě) logické operace a zároveň renderování výstupu. Soubor tedy obsahuje databázové dotazy, logiku (např. PHP operace) a různě poházené HTML tagy. Vše je zamotané do sebe jako špagety. Kód se samozřejmě špatně udržuje, natož rozšiřuje“_ [cit]https://www.itnetwork.cz/navrh/mvc-architektura-navrhovy-vzor/[/cit].

Aplikace se rozdělená na komponenty 3 typů (3 logické části) – Model, View (Pohled) a Controller (nepřekládá se, ale dalo by se přeložit jako „prostředník“) [cit]https://www.itnetwork.cz/navrh/mvc-architektura-navrhovy-vzor/[/cit].

![Znázornění architektury MVC, zdroj: [cit]https://www.konstantinfo.com/blog/mvp-vs-mvc-vs-mvvm/[/cit] || width=0.75\textwidth](https://www.konstantinfo.com/blog/wp-content/uploads/2018/12/MVC-model.png)

### Model
Model obsahuje logiku aplikace. Mohou to být například výpočty, dotazy na databázi, validace apod. Model neví nic o výstupu. Jeho funkce je přijetí parametrů, zpracování a vydání dat ven. Model neví, jak se k němu data dostala a jak budou dále zpracovaná data interpretována [cit]https://www.itnetwork.cz/navrh/mvc-architektura-navrhovy-vzor/[/cit].

### View
Pohled (View) se stará o interpretaci výstupu aplikace. Šablony lze samozřejmě vkládat do sebe, abychom eliminovaly opakování stejného kusu kódu v několika šablonách [cit]https://www.itnetwork.cz/navrh/mvc-architektura-navrhovy-vzor/[/cit].

### Controller
Controller, lze přeložit jako ,,řadič" [cit]https://doc.nette.org/cs/2.4/presenters[/cit].

Controller zastává funkci prostředníka, se kterým komunikuje uživatel, model i pohled. Drží systém pohromadě a propojuje jednotlivé komponenty [cit]https://www.itnetwork.cz/navrh/mvc-architektura-navrhovy-vzor/[/cit].

## MVP architektura
MVP (Model-View-Presenter)  je návrhový vzor, který vychází ze vzoru MVC. Z něj dědí většinu vlastností, ale hlavním rozdílem je v zodpovědnosti vrstvy Presenter. Controller definovuje chování a spravuje typicky několik pohledů (views). Presenter většinou spravuje pouze jediný pohled. V MVC může také pohled komunikovat přímo s modelem, zatímco v MPV má za veškerou ,,komunikaci" mezi pohledem a modelem pouze Presenter [cit]https://www.ackee.cz/blog/uvod-do-mvp-na-androidu/[/cit]

![Znázornění architektury MVP, zdroj: [cit]https://www.konstantinfo.com/blog/mvp-vs-mvc-vs-mvvm/[/cit] || width=0.75\textwidth](https://www.konstantinfo.com/blog/wp-content/uploads/2018/12/MVP-Pattern.png)

## Databáze
_„Databáze neboli datová základna (Data Base) je místo, kam se ukládají určitým způsobem organizované a strukturované údaje. Přístup k údajům uložených v databázi obstarává databázový systém, kterému se říká SŘBD – Systém Řízení Báze Dat (anglický termín DBMS – Database Management System). Běžně se označením databáze myslí jak uložená data, tak i software“_ [cit]Databáze. Misha [online]. 2011 [cit. 2016-12-12]. Dostupné z: http://www.databaze.chytrak.cz/[/cit].

Slovem databáze běžně označujeme každý uspořádaný soubor dat [cit]KOFLER, Michael a ÖGGL, Bernd, PHP 5 a MySQL 5: Průvodce webového programátora. Vyd. 1. Brno: Computer Press, 2007. ISBN 978-80-251-1813-9[/cit].

Databáze slouží primárně jako nástroj pro snadnější a efektivnější extrakci informací. Díky uspořádání se z dat stává přehledný systém informací, ze kterého se dají snadno čerpat informace a znalosti [cit]HORÁK, M. Návrh informačního systému. Brno: Vysoké učení technické v Brně, Fakulta podnikatelská, 2015. 75 s. Vedoucí diplomové práce Ing. Petr Dydowicz, Ph.D.[/cit].


Typy databází lze rozlišovat dle struktur. Mezi základní typy se řadí:
- ploché,
- hierarchické a síťové,
- relační
- objektové [cit]https://www.dotnetportal.cz/clanek/60/Lehky-uvod-teorie-databazi[/cit].

### Relační databáze
Relační databáze jsou v současnosti nejpoužívanějším typem databází [cit]https://www.dotnetportal.cz/clanek/60/Lehky-uvod-teorie-databazi[/cit].

_„Součástí relačních databází jsou tabulky, které označujeme jako relace. Jedná se v podstatě o tabulky se sloupci nazývanými atributy, dále pak řádky, které se označují jako záznamy. U každého z atributů je stanoven datový typ a doména. K ukládání samotných informací zde slouží řádky“_ [cit]https://it-slovnik.cz/pojem/relacni-databaze[/cit].

Je doporučené vytvářet unikátní identifikátory řádků, které jednotlivé záznamy identifikují. Tyto identifikátory se nazývají primární klíče. Dále mohou tabulky obsahovat i cizí klíče. Tyto klíče mají zásadní funkci při návrhu databáze a to, že definují odkaz na primární klíč z jiné tabulky [cit]https://www.dotnetportal.cz/clanek/60/Lehky-uvod-teorie-databazi[/cit]

#### MySQL
MySQL je populární relační databázový systém, který je dostupný na většině dnešních webhostingů. Ačkoli funguje s mnoha různými programovacími jazyky, je často používán s PHP [cit]TARR, A. PHP and MySQL: 24-Hour Trainer. 1st ed. Indianapolis: John Wiley & Sons, 2012. 504 p. ISBN 978-1-118-06688-1.[/cit].

## Správa verzí
Správa verzí je systém, který zaznamenává změny souborů v průběhu času a uživatel má možnost obnovit jejich konkrétní verzi. Lze provádět na téměř jakémkoli typu souboru. Umožňuje vrátit jednotlivé soubory do předchozího stavu, porovnávat změny, kdo je autorem jaké verze a mnoho dalšího. Lze tedy snadno získat ztracené soubory nebo vrátit nežádané úpravy [cit]https://git-scm.com/book/cs/v1/%C3%9Avod-Spr%C3%A1va-verz%C3%AD[/cit].

### Lokální systémy správy verzí
Lokální systém správy verzí disponují jednoduchou lokální databází, ve které se uchovávají všechny změny souborů s nastavenou správou verzí. Jedním z oblíbených nástrojů tohoto typu byl systém "rcs". Tento nástroj pracuje tak, že uchovává ve speciálním formátu seznam změn mezi jednotlivými verzemi. Systém později může na základě porovnávání těchto změn vrátit jakýkoliv soubor do podoby, ve kterém byl v jakékoliv verzi. Toto řešení obsahuje to riziko, že pokud dojde k trvalé ztrátě databáze lokální správy verzí, dojde ke ztrátě celé historie projektu [cit]https://git-scm.com/book/cs/v1/%C3%9Avod-Spr%C3%A1va-verz%C3%AD[/cit].

### Centralizované systémy správy verzí
Centralizované systémy správy verzí mají oproti lokálním systémům tu výhodu, že řeší problematiku spolupráce s dalšími pracovníky v týmu. Mezi tyto systémy patří například CVS, Subversion nebo Perforce. Tyto systémy obsahují mimo lokální část i serverovou, která uchovává všechny verzované soubory. Z tohoto centrálního úložiště si potom soubory stahují jednotliví klienti [cit]https://git-scm.com/book/cs/v1/%C3%9Avod-Spr%C3%A1va-verz%C3%AD[/cit].

Oproti lokálním systémům mají mnoho výhod, například, že do určité míry vědí všichni účastníci projektu co kdo na projektu realizuje a administrátoři mají přesnou kontrolu nad jednotlivými právy. Díky tomu je i podstatně jednodušší spravovat centralizované systémy, než pracovat s lokálními databázemi na jednotlivých klientech [cit]https://git-scm.com/book/cs/v1/%C3%9Avod-Spr%C3%A1va-verz%C3%AD[/cit].

Bohužel tento koncept má závažné nedostatky. Mezi největší nedostatek tohoto systému je ten fakt, že pokud vypadne centrální server, nelze během výpadku buď pracovat vůbec nebo přinejmenším není možné ukládat změny ve verzích souborů. Pokud pak dojde ke zničení úložiště, na němž je uložena databáze centralizovaného systému správy verzí a toto úložiště není předem zálohované, dojde ke ztrátě všech dat (celé historie projektu) - podobně jako u lokálního systému správy verzí [cit]https://git-scm.com/book/cs/v1/%C3%9Avod-Spr%C3%A1va-verz%C3%AD[/cit].

### Distribuované systémy správy verzí
V případě distribuovaných systémů správy verzí uživatelé ze serveru nestahují pouze nejnovější verzi souborů (snímek), ale uchovávají kompletní kopii celého repositáře. Pokud tedy dojde ke kolapsu serveru (i trvalému bez záloh), lze jej znovu obnovit zkopírováním repositáře od jakéhokoliv uživatele. Každá lokální kopie je pak plnohodnotnou zálohou všech dat. Mnoho systémů tohoto typu navíc dokáže pracovat i s několika vzdálenými repositáři, lze tedy v rámci jednoho projektu spolupracovat s několika skupinami lidí najednou. Mezi tyto systémy patří například Git, Mercurial, Bazaar nebo Darcs [cit]https://git-scm.com/book/cs/v1/%C3%9Avod-Spr%C3%A1va-verz%C3%AD[/cit].

## Composer
Composer je nástroj pro správu závislostí v PHP. Umožňuje deklarovat knihovny, na kterých váš projekt závisí, a bude je spravovat (instalovat / aktualizovat) [cit]https://getcomposer.org/doc/00-intro.md[/cit].

Je nejdůležitějším nástrojem pro PHP vývojáře [cit]https://phpfashion.com/composer-jak-na-ruzne-varianty-instalace[/cit].

_„Composer je PHP skript zabalený do souboru composer.phar a pro svůj běh vyžaduje nainstalované PHP minimálně ve verzi 5.3.2. Dalším požadavkem může být přítomnost softwaru git, svn, fossil nebo hg v závislosti na tom, v čem jsou požadované balíčky verzované, ale na to by měl Composer v případě potřeby upozornit“_ [cit]https://www.itnetwork.cz/php/ostatni/composer[/cit].


** Předpoklady pro použití:**
 - projekt závisí na jiných knihovnách,
 - tyto knihovny závisí na dalších knihovnách [cit]https://getcomposer.org/doc/00-intro.md[/cit].

Funkce Composeru:
- umožňuje deklarovat knihovny, na které je projekt vázán,
- zjistí, které verze balíčků mohou a musí být nainstalovány a nainstaluje je (což znamená, že je stáhne do projektu) [cit]https://getcomposer.org/doc/00-intro.md[/cit].

### Satis
Satis je open source generátor statického Composer repositáře. Je to ultralehké řešení, které umožňuje hostování metadata privátních balíčků (repositářů) [cit]https://getcomposer.org/doc/articles/handling-private-packages-with-satis.md[/cit].

## Nette Framework
![Logo Nette Framework, zdroj: [cit]https://nette.org/cs/logo[/cit] || width=0.5\textwidth](https://files.nette.org/git/www/nette-logo-blue.png)
_„Nette je rodina vyspělých a samostatně použitelných komponent pro PHP. Nechte se jimi nadchnout. Dohromady tvoří framework, vyhodnocený jako 3. nejpopulárnější na světě. Filosofie Nette klade mimořádný důraz na produktivitu, nejlepší postupy a bezpečnost“_ [cit]https://nette.org/cs/[/cit].

Nette Framework je vytvořený tak, aby byl co nejpoužitelnější. Jde o framework, se kterým je snadné a zábavné pracovat. Dává srozumitelnou syntaxi, napomáhá při programování a debugování a pomáhá soustředit se na kreativní stránku vývoje [cit]https://doc.nette.org/cs/2.4/getting-started[/cit].

Nette Framework používají významné společnosti jako třeba T-Systems, GE Money, Mladá fronta, DHL, Logio, ESET, Actum, Slevomat, Socialbakers, SUPRAPHON a další [cit]https://doc.nette.org/cs/2.4/getting-started[/cit].

## Nittro
Nittro je JavaScriptový framework na straně klienta, speciálně vytvořený pro Nette aplikace. Vytváří kompletní AJAXem řízené stránky. Stará se o základní funkcionality, jako jsou aktualizace sekcí na stránce, aktualizace historie prohlížeče, zobrazování animací během načítání obsahu, validace formuláře na klientské straně, AJAX upload, zobrazování systémových zpráv a další. Lze do Nette aplikace snadno aplikovat a neobsahuje žádné závislosti na další JavaScriptové knihovny [cit]https://github.com/nittro/nittro[/cit].

## Doctrine 2
![Logo Doctrine, zdroj: [cit]https://www.biostatistika.cz/index.php?pg=produkty--clade-is[/cit] || width=0.5\textwidth](https://www.biostatistika.cz/res/image/technology-mix/doctrine_logo.png)
Doctrine 2 je objektově-relační mapovač (ORM) pro PHP 7.1+, který zajišťuje transparentní ukládání pro objekty PHP. V jádře využívá model datového mapovače, jehož cílem je úplné oddělení domény (obchodní logiky) od logiky ukládání dat do relační databáze [cit]https://www.doctrine-project.org/projects/doctrine-orm/en/2.6/tutorials/getting-started.html[/cit].

Výhodou Doctrine pro programátora je schopnost soustředit se na objektově orientovanou obchodní logiku a starat se o ukládání dat do relační databáze pouze jako sekundární problém. Ukládání dat do relační databáze je tedy zcela řešeno pomocí Doctrine [cit]https://www.doctrine-project.org/projects/doctrine-orm/en/2.6/tutorials/getting-started.html[/cit].

### Entity

_„Entity jsou základní kameny v Doctrine 2 a vůbec celé vaší aplikace. Každá entita reprezentuje nějaký objekt reálného světa, takzvaný doménový objekt. Jednu entitu tak budu mít definovanou pro článek, jinou pro kategorii, další pro uživatele“_ [cit]https://www.zdrojak.cz/clanky/doctrine-2-zakladni-definice-entit/[/cit].

Entity jsou tedy v PHP objekty které lze identifikovat na základě mnoha požadavků pomocí jedinečného identifikátoru nebo primárního klíče. Tyto třídy nepotřebují rozšířit žádnou abstraktní základní třídu nebo rozhraní. Třída entity nesmí být konečná nebo nesmí obsahovat konečné metody [cit]https://www.doctrine-project.org/projects/doctrine-orm/en/2.6/tutorials/getting-started.html[/cit].

## Elasticsearch
![Logo Elasticsearch, zdroj: [cit]https://www.elastic.co/brand[/cit] || width=0.5\textwidth](https://hanabrand.cz/temp/dp/logo-elastic-search.png)
Elasticsearch je vysoce škálovatelný open-source fulltextový vyhledávací a analytický engine. Umožňuje rychle a v reálném čase ukládat, vyhledávat a analyzovat velké objemy dat. Používá se obecně jako základní motor / technologie, která napomáhá aplikacím, které mají složité vyhledávací funkce a požadavky [cit]https://www.elastic.co/guide/en/elasticsearch/reference/current/getting-started.html[/cit].


**Pár vzorových případů pro využití Elasticsearch:**
- díky uložení celého katalogu do Elasticsearch lze produkty vyhledávat a automaticky doplňovat vyhledávání v e-shopu,
- shromažďování a následná analýza a vyhodnocování protokolů (hledání trendů, statistik,agregační funkce, vyhledávání anomálií),
- řešení analytických a Business-inteligence potřeb a je kladen důraz na ryhlou analýzu a vizualizaci dat mezi miliony nebo miliardy záznamů [cit]https://www.elastic.co/guide/en/elasticsearch/reference/current/getting-started.html[/cit].

## Message broker
MessageBroker je prostřední počítačový programový modul, který převádí zprávu z formálního protokolu zasílání odesílatele do formálního protokolu zasílání zpráv přijímače. Zprostředkovatelé zpráv jsou prvky v telekomunikačních nebo počítačových sítích, kde softwarové aplikace komunikují výměnou formálně definovaných zpráv [cit]https://www.gartner.com/it-glossary/ib-integration-broker[/cit].

### RabbitMQ
![Logo RabbitMQ, zdroj: [cit]https://medium.com/@kousiknath/dabbling-around-rabbit-mq-persistence-durability-message-routing-f4efc696098c[/cit] || width=0.5\textwidth](https://cdn-images-1.medium.com/max/800/1*UnYL-2r54_7AnEwQv0cVxA.png)
RabbitMQ je nejrozšířenější open source message broker. Běží na mnoha operačních systémech a cloudových prostředích a poskytuje širokou škálu vývojářských nástrojů pro většinu populárních jazyků. Je lehký a snadno se rozšiřuje i v cloudových řešeních. Lze nasadit na distribuované i sdružených konfiguracích tak, aby splňovaly vysoké požadavky na vysokou dostupnost [cit]https://www.rabbitmq.com/[/cit].

## Virtualizace
_"Virtualizace vytváří simulované neboli virtuální výpočetní prostředí namísto fyzického prostředí. Virtualizace často zahrnuje počítačem vytvořené verze hardwaru, operačních systémů, úložných zařízení atd. To umožňuje organizacím rozdělit jeden fyzický počítač nebo server na několik virtuálních počítačů. Každý virtuální počítač pak může pracovat nezávisle a spouštět různé operační systémy nebo aplikace, zatímco sdílí prostředky jediného hostitelského počítače“_ [cit]https://azure.microsoft.com/cs-cz/overview/what-is-virtualization/[/cit].

### Vagrant
Vagrant je nástroj pro vytváření a správu prostředí virtuálních počítačů. Poskytuje snadno konfigurovatelné, reprodukovatelné a přenosné pracovní prostředí postavené na špičkové technologii a řízené jediným konzistentním pracovním postupem, který pomáhá maximalizovat produktivitu jednotlivce i celého vývojového týmu [cit]https://www.vagrantup.com/intro/[/cit].

### Laravel Homestead
Laravel Homestead je oficiální, předem zabalený Vagrant box, který poskytuje skvělé vývojové prostředí bez nutnosti instalace PHP, webového serveru a jakéhokoliv jiného serverového softwaru na lokálním počítači [cit]https://laravel.com/docs/5.8/homestead[/cit].


Aktuálně Laravel Homestead ve verzi 5.8 obsahuje například software:
- Ubuntu 18.04,
- Git,
- PHP 7.3,
- Nginx,
- MySQL,
- Composer,
- Node (Yarn, Bower, Grunt, a Gulp),
- Redis,
- Elasticsearch,
- a další [cit]https://laravel.com/docs/5.8/homestead[/cit].

## Analýza statického kódu
Analýza statického kódu (známá také jako analýza zdrojového kódu) se obvykle provádí jako součást kontroly kódu (také označovaného jako testování bílého boxu). Analýza statického kódu se běžně vztahuje k nástrojům pro analýzy, které se pokoušejí rozpoznat možné chyby v rámci testování „statického“ (nespuštěného) zdrojového kódu pomocí technik, jako je například analýza barev a analýza toku dat [cit]https://www.owasp.org/index.php/Static_Code_Analysis[/cit].

### Cyklomatická složitost
Cyklomatická složitost je metrika kvality softwaru. Nejjednodušší definice popisuje cyklomatickou složitost jako počet rozhodnutí ve zdrojovém kódu. Čím vyšší je počet, tím složitější je kód. Je důležitou metrikou, protože určuje limitní komplexnost kódu a určuje počet požadovaných testovacích případů [cit]https://www.perforce.com/blog/qac/what-cyclomatic-complexity[/cit].

# Analýza současné situace
V této části práce se budu věnovat popisu základních informací o živnostníkovi a popisu aktuálního stavu, ve kterém se jeho e-shopové nachází.

## Základní informace o živnostníkovi
_„Hana Hladíková (68737424) je Fyzická osoba podnikající dle živnostenského zákona nezapsaná v obchodním rejstříku. Má celkem jednu živnost. Živnost provozuje od roku 2001. V současnosti stále podniká“_ [cit]https://firmy.euro.cz/subjekt-hana-hladikova-68737424#res[/cit].


**Souhrnné informace:**
- jméno: Hana Hladíková,
- právní forma podnikání: fyzická osoba podnikající dle živnostenského zákona nezapsaná v obchodním rejstříku,
- přidělený úřad: městský úřad Velké Meziříčí,
- vznik živnosti: 1.7.2001,
- sídlo: Lavičky 127, 594 01,
- klasifikace ekonomických činností -CZ-: ostatní profesní, vědecké a technické činnosti, poradenství v oblasti řízení,
- IČO: 68737424,
- DIČ: CZ7656024827,
- datum registrace k dani z přidané hodnoty: 13.3.2019,
- webové stránky: HanaBrand.cz.

## Značka HanaBrand
V rámci živnostníkovy podnikatelské činnosti vznikla v roce 2015 značka HanaBrand a pod touto značkou jsou označovány všechny nabízené produkty.

![Logo HanaBrand používané převážně na výrobcích, zdroj: živnostníkovy interní materiály || width=0.3\textwidth](https://hanabrand.cz/temp/dp/fb_logo_transp_big_black_transp_halfly.png)

![Zjednodušená varianta loga HanaBrand, zdroj: živnostníkovy interní materiály || width=0.3\textwidth](https://hanabrand.cz/temp/dp/logo-miniaturni.png)

## Nabízené produkty a služby
Živnostník pod značkou HanaBrand nabízí produkty vlastní výroby, které jsou vyrobeny z certifikovaných materiálů českého původu. Mezi tyto produkty patří například:
- dámské kuchyňské zástěry,
- ekologické pytlíky (pro bezobalové nakupování),
- vaky na záda,
- tašky,
- dětské zástěry do kuchyně,
- chňapky,
- pánské kuchyňské zástěry.

![Poměr obratu v jednotlivých kategoriích na e-shopu v roce 2018, zdroj: interní živnostníkovy dokumenty](https://hanabrand.cz/temp/dp/pomer-obratu-kategorii.png)
Mimo produkty také živnostník nabízí službu zakázkového šití.
  
## Obchodní vztahy
Živnostník nabízí pod značkou HanaBrand své vlastní produkty a služby formou B2C a B2B. 

### B2C
Výrobky a služby živnostník poskytuje poskytuje koncovým zákazníkům prostřednictvím následujících kanálů:
- vlastní E-shop,
- handmade internetové tržiště Fler.cz,
- handmade internetové tržiště Sashe.sk,
- přímý prodej (trhy, jarmarky, zakázková výroba),

### B2B
Výrobky a služby živnostník poskytuje obchodním partnerům pouze prostřednictvím e-mailové a telefonické komunikace. Vytvoření objednávky s velkoobchodní slevou prostřednictvím e-shopu není možné, protože aktuální e-shopové řešení touto funkcionalitou nedisponuje. Zároveň poskytuje společnostem na Vysočině komisní prodej.

## Současná technická situace
V této části bude popsána současná technická situace ve kterém se nachází aktuální e-shopové řešení. Aktuálně provozované e-shopové řešení bylo vytvořeno v roce 2016. Jedná se o PHP aplikaci, která je objektově orientovaná a využívá návrhový vzor MVC. Řešení nevyužívá žádný aplikační framework, proto je poměrně složité toto řešení snadno rozšiřovat tak, aby splňoval veškeré požadavky živnostníka.

### Technické požadavky současného e-shopu
Pro provoz současného e-shopového řešení jsou potřeba následující technické požadavky:
- Apache Server 2.4.29,
- PHP 5.6.40,
- rozšíření webového serveru mysqli, gd a json,
- MariaDB 10.0.21.

### Entity v aplikaci
Seznam existujících entit v aplikaci:
- Article (článek),
- ArticleCategory (kategorie článků)
- Basket (košík),
- Category (kategorie produktů),
- CustomField (uživatelské pole produktu),
- CustomFieldValue (hodnota uživatelského pole produktu),
- Discount (sleva)
- Order (objednávka),
- OrderItem (produkt objednávky)
- Payment (platba),
- Product (produkt)
- Shipping (doprava),
- User (uživatel).

### Administrované entity v aplikaci
![Přihlášení do administračního rozhraní e-shopu, zdroj: současné e-shopové řešení](https://hanabrand.cz/temp/dp/prihlaseni-administrace.png)

Seznam entit, které jsou administrovatelné v administrační části e-shopu:
- Discount (sleva) - pouze vytvoření,
- Order (objednávka),
- Product (produkt).

![Přehled výpisu produktů v administraci, zdroj: současné e-shopové řešení](https://www.hanabrand.cz/temp/dp/prehled-administrace-produktu.png)

Zbylé entity jsou administrovatelné pouze skrz konfiguraci databáze aplikace. To značně ztěžuje administraci celé aplikace, protože jakákoliv úprava, která se netýká objednávky nebo produktu vyžaduje zásah programátora.

![Administrace produktu, zdroj: současné e-shopové řešení](https://hanabrand.cz/temp/dp/administrace-produktu2.png)

V administraci produktů lze konfigurovat vlastnosti, které definují obsah produktu. Lze nastavit:
- název,
- alias (část URL adresy pro zobrazení detailu produktu),
- zařazení do kategorie,
- stav produktu (nezveřejněný, zveřejněný, vyprodaný),
- příznak doporučeného produktu,
- příznak nového produktu,
- počet návštěvníků, kterým se produkt líbil (ikona srdíčka na detailu produktu),
- konfigurace uživatelských polí (popis, fotografie, fyzické proporce, barva, vzor, atd.),
- metadescription,
- zobrazení v exportních feedech,
- název v exportních feedech (pokud se liší od základního názvu).

![Přehled objednávek v administraci, zdroj: současné e-shopové řešení](https://hanabrand.cz/temp/dp/prehled-objednavek.png)

Správa objednávky je o poznání prostější. Objednávce lze v administračním rozhraní nastavit pouze stav. Na výběr jsou možnosti:
- nová,
- zpracovává se,
- zaplaceno,
- odesláno,
- dokončeno,
- stornováno.
Při změně objednávky na stavy "zaplaceno", "odesláno" a "dokončeno" odešle systém zákazníkovi e-mail zákazníkovi s informacemi o současném stavu jeho objednávky.
![Detail objednávky, zdroj: současné e-shopové řešení](https://hanabrand.cz/temp/dp/prehled-objednavky.png)

Formulář pro vytvoření nového slevového kupónu je také velice prostý.  Slevové kupóny nelze z pohledu administračního rozhraní systému nijak pokročile spravovat, lze je pouze vytvořit.
![Formulář pro přidání nového slevového kupónu, zdroj: současné e-shopové řešení || width=0.75\textwidth](https://hanabrand.cz/temp/dp/slevovy-kupon.png)

Po definování slevy (pevné částky nebo nebo procentuální sazby z celkové ceny objednávky), minimální celkové částky objednávky pro umožnění aplikace slevy a maximální platnosti kupónu systém vygeneruje náhodný jedinečný slevový kód kupónu a uloží kupón do databáze. 

### Implementované funkcionality
Seznam implementovaných funkcionalit, kterými aktuální řešení disponuje:
- administrace objednávek,
- administrace produktů,
- aplikace slevových kupónů na objednávku,
- export produktů do externích systémů (Zboží.cz, Google Merchants),
- individuální definice cen způsobů doprav,
- individuální definice cen způsobů plateb v závislosti na zvoleném způsobu dopravy,
- odesílání e-mailů administrátorům a zákazníkovi při vytvoření objednávky a při změně stavu objednávky.
- odesílání zprávy přes nástroj Pushover administrátorům při vytvoření nové objednávky,
- responzivní design šablon,
- správa košíku produktů,
- vytvoření a dokončení objednávky,
- vytvoření slevového kupónu,
- výběr parcelshopu v případě zvolení způsobu dopravy přes Zásilkovnu,
- zobrazení detailu produktu,
- zobrazení detailu článku,
- zobrazení kategorie produktů.

## Statická analýza kódu
Protože mám přístup k zdrojovým souborům současně provozovaného řešení, mohu provést statickou analýzu kódu za pomocí nástroje PhpMetrics.
![Výsledek statické analýzy kódu současného řešení, zdroj: nástroj PhpMetrics](https://hanabrand.cz/temp/dp/staticka-analyza-hanabrand.png)

Z výsledků analýzy lze vyčíst například základní informace, tedy, že zdrojový kód obsahuje:
- 68 tříd,
- 15 691 řádků kódu,
- v tomto kódu se vyskytuje celkem 67 chyb,
- průměrný počet 0,87 chyb na jednu třídu,
- index průměrné cyklomatické složitosti je 25,15.

## Zhodnocení současného stavu
Na základě konzultace s paní Hanou Hladíkovou, provozovatelkou současného e-shopového řešení, lze konstatovat, že zhruba 60 % příjmů tvoří objednávky vytvořené přes současné e-shopové řešení. Živnostník je tedy z větší části závislý na internetovém prodeji skrz současný e-shop.

Toto řešení vzniklo jako jednoduchá aplikace na zelené louce bez využití jakéhokoliv aplikačního frameworku v roce 2016. Od té doby se řešení prakticky nevyvíjelo, funkcionality nevylepšovaly a kód se neaktualizoval, čemuž také nasvědčuje fakt, že nebyla aktualizována verze PHP, na kterém je systém provozován (aplikace pro svůj chod používá PHP 5.6.40). Zároveň zdrojové kódy e-shopu neobsahují například dnes již běžně používané jmenné prostory, které slouží ke sdružování logických celků tříd aplikace. 

Sám živnostník cítí potřebu inovace řešení, protože současné řešení postrádá spoustu důležitých funkcí. Inovací řešení očekává především usnadnění práce s e-shopem, přehlednější a snadnější administrativu. E-shop by měl být pro zákazníky sestaven tak, aby se v něm dobře orientovali a například jim umožnit vkládat recenze k produktům, čímž se také zvýší důvěryhodnost internetového obchodu. Dále plánuje nabízet své výrobky a služby za hranicemi České republiky, z toho důvodu požaduje lokalizaci celého řešení.

V současnosti živnostník propaguje svoje výrobky pomocí placených kampaní Sklik, Zboží.cz, Facebook i Instagram, Po inovaci řešení má v plánu investovat do marketingu mnohem více finančních prostředků, než kolik investuje nyní, což se má projevit na návštěvnosti e-shopu a zvýšení konverzního poměru.

Celé řešení by tak mělo usnadňovat živnostníkovi práci, umožnit konfigurovat systém dle potřeb, poskytovat potřebné funkcionality, které v současném řešení chybí a napomoct s některými činnostmi jejich automatizací.

## Požadavky na nové řešení
Na základě konzultace s Hanou Hladíkovou, byl sestaven následující seznam požadavků, které by mělo nové řešení poskytovat:
- administrace všech entit v systému (nejen produkty a objednávky),
- propojení s cenovými srovnávači (Zboží.cz, Heuréka, Google Merchants),
- platba kartou,
- varianty produktů,
- uživatelské parametry produktů,
- propracovaná cenotvorba (měny, slevy, cenové hladiny),
- konfigurace dostupných způsobů doprav (dle zemí, dle ceny objednávky, dle rozměrů a váhy košíku),
- zobrazování cen s DPH i bez DPH,
- propojení s externími službami (Zásilkovna, Česká pošta),
- správa skladů,
- dodací i fakturační adresa pro objednání,
- uživatelské účty pro zákazníky (rezervace produktů, historie objednávek, přiřazení cenové hladiny, správa adres)
- recenze produktů,
- správa obsahu (bannery, články, kategorie),
- překlady do cizích jazyků,
- změna vzhledu e-shopu,
- správa metatagů pro SEO,
- vyhledávání (fulltextové, na základě parametrů).

## Průzkum dostupných řešení
Dané požadavky živnostníka lze splnit pomocí různých dostupných řešení. Ty lze rozdělit dle několika kritérií na:
- vlastní řešení,
- open-source řešení,
- řešení na míru,
- pronájem [cit]https://www.souki.cz/jak-reseni-eshopu-si-vybrat[/cit].

### Vlastní řešení 
Výhodou vlastního řešení je ta, že všechny funkce systému budou pod kontrolou. Když bude potřeba něco změnit, nemusí se na nikoho čekat nebo někomu platit, prostě lze danou funkci do systému doplnit. Dané řešení navíc bude vyřešené na míru konkrétním potřebám dané společnosti [cit]https://www.souki.cz/jak-reseni-eshopu-si-vybrat[/cit].

Nevýhodou toho řešení je ale vysokým nákladem v podobě velkého počtu stráveného časem při vývoji. Pokud je vývojář daného řešení zároveň majitelem obchodu, doporučuje se spíše investovat strávený čas do samotného rozvoje podnikání, než tvorbou platformy. Pro vývoj vlastní platformy je také vhodné mít již zkušenosti s vývojem e-commerce řešení [cit]https://www.souki.cz/jak-reseni-eshopu-si-vybrat[/cit].


**Výhody:**
- nulové finanční náklady,
- řešení přesně podle potřeb,
- žádná vazba na poskytovatele [cit]https://www.souki.cz/jak-reseni-eshopu-si-vybrat[/cit].


**Nevýhody:**
- velké časové náklady,
- nutnost know-how,
- uvázání se k vývoji [cit]https://www.souki.cz/jak-reseni-eshopu-si-vybrat[/cit].

### Open-source řešení
Poměrně často se lze na internetu setkat s open-source e-shopovými řešeními. Jejich zdrojové soubory jsou volně ke stažení a systém lze po instalaci na hostingu zprovoznit. Spuštění systému je tedy poměrně velice rychlé. Většinou pro tato řešení zároveň existují různé doplňky od jiných vývojářů (například platba kartou), je tedy možné systém s jejich pomocí customizovat a dále rozšiřovat [cit]https://www.souki.cz/jak-reseni-eshopu-si-vybrat[/cit].

Problémem tohoto řešení je, že systém musí být univerzálním řešením pro tisíce obchodníků, tudíž v zásadě nebude systém v základním nastavení vyhovovat individuálním potřebám podniku a bude nutné ho tedy naprosto vždy upravit a doplnit chybějící funkce. Bohužel zároveň většina open-source řešení tohoto typu má velmi špatnou kvalitu zdrojového kódu a mnohdy je i zázrakem, že dané řešení nějakým způsobem vůbec funguje. Některá řešení jsou navíc neuvěřitelně náročná na výkon serveru. Takováto řešení navíc často nedokážou naplnit očekávání dle českých specifik (například práci s dvojí hladinou DPH nebo vystavení faktury dle našich zvyklostí) [cit]https://www.souki.cz/jak-reseni-eshopu-si-vybrat[/cit].


**Výhody:**
- zdarma
- okamžitě k použití
- někdy velké komunity pro vývoj dalších funkcí [cit]https://www.souki.cz/jak-reseni-eshopu-si-vybrat[/cit].


**Nevýhody:**
- často dost špatná kvalita kódu
- náročnost na hosting
- tuctový vzhled obchodu
- často nevhodné pro české podmínky
- zbytečné funkce [cit]https://www.souki.cz/jak-reseni-eshopu-si-vybrat[/cit].


Mezi tato řešení patří například:
- WooCommerce,
- X-Cart,
- Zen Cart,
- Magento Open Source,
- OpenCart,
- PrestaShop,
- a další [cit]https://ecommerce-platforms.com/articles/open-source-ecommerce-platforms[/cit].

### Řešení na míru
Řešení na míru vznikne tak, že externí společnost vytvoří e-shopové řešení od základů přesně podle požadavků a představ zadavatele. Většinou se vyplatí až pro velké obchody, které mají speciální požadavky a do budoucna je potřeba počítat s náklady na servis [cit]https://www.souki.cz/jak-reseni-eshopu-si-vybrat[/cit].


**Výhody:**
- odladěné funkce
- vytvoření přesně podle požadavků [cit]https://www.souki.cz/jak-reseni-eshopu-si-vybrat[/cit].


**Nevýhody:**
- velmi vysoká cena [cit]https://www.souki.cz/jak-reseni-eshopu-si-vybrat[/cit].

### Pronájem
Princip pronajímaného řešení je ten, že dodavatel poskytuje řešení e-shopu obchodníkovi a ten mu za jeho využívání platí měsíční paušál [cit]https://www.souki.cz/jak-reseni-eshopu-si-vybrat[/cit].

Mezi výhody tohoto řešení patří cena. Ta se dnes pohybuje v rozmezí stovek korun za měsíční pronájem řešení se základní funkcionalitou. I u tohoto řešení platí, že čím náročnější potřeby a požadavky na řešení, tím vyšší cena za pronájem. Mezi výhody dále patří rychlost spuštění obchodu a pokud poskytovatel tyto služby nabízí, tak i zákaznická podpora a průběžný vývoj [cit]https://www.podnikatel.cz/clanky/pokud-neplanujete-dalsi-alzu-muze-se-pro-zacatek-hodit-pronajem-e-shopu/[/cit].

Nevýhodami tohoto řešení jsou limity platformy a platí tedy, že mnohdy se obchodník musí přizpůsobovat e-shopu a ne e-shop obchodníkovi. Při dokupování nadstandardních modulů a úpravách na míru navíc roste i cena řešení (jeho hlavní výhoda). Další nevýhodou je menší možnost úprav a jistá šablonovanost e-shopu. Díky tomu tohto řešení není vhodné pro střední a velké e-shopy, které vyžadují spíše robustnější e-shopový systém [cit]https://www.podnikatel.cz/clanky/pokud-neplanujete-dalsi-alzu-muze-se-pro-zacatek-hodit-pronajem-e-shopu/[/cit].

**Výhody:**
- cena,
- rychlost spuštění obchodu [cit]https://www.podnikatel.cz/clanky/pokud-neplanujete-dalsi-alzu-muze-se-pro-zacatek-hodit-pronajem-e-shopu/[/cit].

### Výsledek průzkumu
Živnostník má za sebou již od roku 2015 zkušenosti s různými e-shopovými řešeními, se kterými postupem času nebyl příliš spokojený. Tato řešení se neinovovaly a postupně přestávaly dostačovat potřebám živnostníka. Kombinace těchto faktů s vyhotoveným průzkumem dostupných řešení lze vyvodit závěr, že v aktuální situaci by bylo vhodné, aby bylo pro živnostníka vyhotoveno řešení na míru přesně dle jeho požadavků.

# Návrh řešení
V této kapitole se zaměřím na návrhovou a implementační část (na úrovni prototypu) vytvoření e-commerce platformy. Tato platforma bude vytvořena tak, aby poskytovala kvalitní technologický základ pro budoucí vývoj v plnohodnotný produkt, který živnostníkovi poskytne náhradu za aktuální e-shopové řešení a bude disponovat funkcionalitami, které od nového řešení požaduje.
Z pohledu technologického zpracování lze vytvořit technicky univerzální řešení, které bude možné customizovat dle přesných konkrétních požadavků. Toto řešení následně živnostníkovi poskytnout formou pronájmu nebo prodejem licence. Pokud bude celé řešení takto koncipováno, bude možné výsledné necustomizované řešení poskytnou i dalším subjektům.

## Výběr technologií
Pokusím se blíže přiblížit vybrané technologie, které tvoří základ připravovaného e-commerce řešení. Veškeré použité technologie jsou poskytované buď jako open-source nebo zcela zdarma, například pod licencí Apache.

### Technologická platforma
Na základě osobních zkušeností jsem se rozhodl realizovat celý projekt za použití programovacích jazyků PHP a JavaScript. PHP pro využití ve skriptování na straně serveru, JavaScript pro skriptování na straně klienta - pro zvýšení uživatelského požitku z využívání aplikace, například za použití technologie AJAX.
Typ databáze jsem zvolil MySQL a to proto, že ho přímo obsahuje připravené vývojové prostředí Laravel Homestead, podporuje ho ORM Doctrine 2 a díky kladným osobním zkušenostem.

![Logo systému Jarvis, zdroj: vlastní zpracování || width=0.75\textwidth](https://hanabrand.cz/temp/dp/jarvis-logo.png)

Celý projekt jsem se rozhodl pojmenovat jako "Jarvis".

### Laravel Homestead
Pro vývojové prostředí byl použit Laravel Homestead, které poskytuje předinstalovaný systém se všemi základními balíčky potřebnými pro vývoj PHP aplikace. To umožňuje poměrně rychlý způsob, jak začít vyvíjet aplikaci bez nutnosti zdlouhavé konfigurace prostředí. Navíc toto řešení disponuje tou výhodou, že v případě vícečlenného týmu vývojářů budou všichni vývojáři disponovat stejným vývojovým prostředím.
Bylo tedy možné se okamžitě věnovat realizaci projektu a nebylo nutné trávit čas zbytečnou konfigurací vývojového prostředí. 

### Composer
Pro co nejvíce systémové řešení jsem se rozhodl celou platformu rozdělit na jednotlivé balíčky (logické celky), které jsou verzovány v samostatných privátních repositářích. Jejich integraci do celistvé aplikace řeší nástroj Composer, jako instalaci jednotlivých závislostí. Každý balíček pak vyžaduje vlastní další závislosti (například na balíčcích třetích stran), které Composer při instalaci systému sám nainstaluje.
Navíc Composer při instalaci vytvoří mapu tříd, které se nacházejí v jednotlivých balíčcích a zajistí jejich automatické načítání během chodu aplikace. To práci výrazně ulehčí, protože není nutné řešit import tříd v aplikaci samotné.

### Satis
Aby mohl Composer instalovat balíčky z privátních repositářů, je zapotřebí pro tyto balíčky vytvořit statický Composer repositář. K tomu slouží open-source nástroj Satis. V něm se jednoduše definují zdroje (například GIT repositář), ze kterých Satis vytvoří svůj vlastní statický repositář.
![Satis konfigurace, zdroj: vlastní zpracování](https://hanabrand.cz/temp/dp/satis-konfigurace.png?2)

### Nette Framework
Na základě zkušeností z předchozího řešení je nutné, aby celé řešení bylo postavené na kvalitním PHP Frameworku, který bude umožňovat poměrně snadný vývoj celé aplikace a do budoucna dostatečný prostor pro snadný rozvoj aplikace. V tomto řešení jsem na základě osobních zkušeností zvolil český Nette Framework v aktuálně poslední stabilní verzi 2.4.

### Nittro
Pro lepší uživatelský požitek z užívání aplikace je využita technologie AJAX. Nittro je rozšíření Nette Framework, které automaticky umožní v aplikaci využít asynchronní zpracovávání HTTP požadavků.
Toho je využito hlavně v administrační části systému, kde jsou naprosto všechny požadavky asynchronní. To zrychluje práci se systémem, protože není nutné čekat na překreslení celého dokumentu webové stránky.

### Doctrine 2
Objektový přístup k entitám modelové vrstvy systému zajišťuje objektově relační mapování. Toho je v systému dosaženo použitím Doctrine 2, který mapuje entity systému na data uložená v MySQL databázi. Také zodpovídá za strukturu databáze. Informace o schématu relace v databázi čte přímo v třídách entit, kde jsou tyto informace zapsány pomocí speciálního anotačního zápisu.
![Ukázka zdrojového kódu AddressEntity (entita adresy) s využitím anotačního zápisu pro Doctrine 2, zdroj: gitlab.com](https://hanabrand.cz/temp/dp/address-entity.png)

### Elasticsearch
Pro vyhledávání v systém jsem využil fulltextový vyhledávací engine Elasticsearch. Ten zajišťuje například vyhledávání produktů nebo článků v modulu systému, který zobrazuje data zákazníkům obchodu. Vyhledávání je možné provést nad všemi daty, které jsou ze systému vyexportovány a naimportovány do Elasticsearch. Je tedy například možné vyhledávat pomocí titulku nebo konkrétního parametru entity.

### RabbitMQ
RabbitMQ je používán jako fronta pro asynchronní paralelní zpracovávání úloh v systému. Řeší například odesílání e-mailů nebo automatický export entit do Elasticsearch.
Výhodou tohoto řešení je fakt, že konkrétní úlohy se nemusí zpracovávat ve stejném vlákně a dojde ke zrychlení odpovědi systému na konkrétní požadavek, protože úlohy jsou zpracovány paralelně v samostatných vláknech.
Zároveň je možnost větší kontroly nad chybami během zpracovávání úloh. Pokud například dojde k výskytu chyby během zpracovávání úlohy, daná úloha není ve frontě označena jako zpracovaná, ale po určitém časovém intervalu se RabbitMQ opět pokusí danou úlohu zpracovat.

## Struktura aplikace
V této sekci blíže popíši strukturu aplikace. Jednotlivé rozdělení do logických celků (balíčků) a přiblížení adresářové struktury.

### Části systému
Celý systém je rozdělen na samostatné logické celky, které jsou reprezentovány jako samostatně instalovatelné balíčky a jsou verzované v samostatných repositářích. Tyto balíčky jsou:  
- Jarvis App
- Jarvis Core,
- Jarvis CMS,
- Jarvis Shop,

![Rozdělení systému na balíčky - jednotlivé repositáře, zdroj: gitlab.com](https://hanabrand.cz/temp/dp/balicky-systemu.png)

Systém je tvořen samostatnými balíčky, které se instalují pomocí nástroje Composer. Zdrojové kódy těchto balíčků se po instalaci nacházejí v adresáři ,,vendor/" a z pohledu aplikace by nemělo docházet k úpravám jejich kódu (úpravy se s aktualizací balíčků zahodí).

#### Jarvis App
Základním balíčkem aplikace, balíček je typu "projekt", vytváří základní adresářovou strukturu aplikace a je závislý na balíčku "core". Pomocí tohoto balíčku lze tedy vytvořit samotnou aplikaci (instalací nadstaveb CMS nebo Shop).

![Logo Jarvis App, zdroj: vlastní zpracování || width=0.2\textwidth](https://hanabrand.cz/temp/dp/jarvis-app.png?1)

#### Jarvis Core
Jádro aplikace, balíček je typu "knihovna". Vytváří všechny základní prostředky, kterými systém disponuje a zbytek aplikace je na těchto prostředcích závislý. Lze v něm tedy například nalézt základní modelovou strukturu aplikace, a základní komponenty systému.

![Logo Jarvis App, zdroj: vlastní zpracování || width=0.2\textwidth](https://hanabrand.cz/temp/dp/jarvis-core.png?1)

#### Jarvis CMS
Balíček typu "knihovna", poskytuje funkcionality systému pro správu obsahu. Balíček je závislý na balíčku "Core". Obsahuje modelovou strukturu aplikace a funkcionality, které rozšiřují základní systém o správu obsahu - možnost správy kategorií a článků.

![Logo Jarvis App, zdroj: vlastní zpracování || width=0.2\textwidth](https://hanabrand.cz/temp/dp/jarvis-cms.png?1)

#### Jarvis Shop
Balíček typu "knihovna", poskytuje funkcionality e-commerce systému. Balíček je závislý na balíčku "Core" a "CMS". Obsahuje modelovou strukturu aplikace a funkcionality, které rozšiřují základní systém o funkce elektronického obchodu.

![Logo Jarvis App, zdroj: vlastní zpracování || width=0.2\textwidth](https://hanabrand.cz/temp/dp/jarvis-shop.png?1)

### Moduly
Základní systém je ve své vnitřní logice rozdělen na 3 moduly. Ty se vzájemně liší svými účely použití. Tyto moduly jsou:
- Admin,
- Front,
- Robot.

![3 Moduly systému, zdroj: vlastní zpracování || width=0.75\textwidth](https://hanabrand.cz/temp/dp/3-moduly.png?2)

#### Admin
Modul Admin poskytuje administrační rozhraní celého systému. Na základě ACL přihlášenému uživateli správu administrovatelných entit, které se v celém systému nacházejí.

#### Front
Modul Front poskytuje rozhraní, které je výsledkem konfigurace systému v administračním rozhraní. Právě tento modul je zodpovědný za prezentování dat zákazníkům obchodu, tedy mimo jiné například za prezentování zobrazení produktové kategorie návštěvníkům e-shopu, vložení produktu do košíku, vytvoření a dokončení objednávky, zobrazení detailu článku, atd.

#### Robot
Tento modul poskytuje služby pouze systému samotnému. Například se v tomto modulu nachází logika pro poskytování funkcionality ke asynchronní zpracování obrázků.

### Adresářová struktura
![Základní adresářová struktura aplikace, zdroj: náhled repositáře v administraci gitlab.com || width=0.75\textwidth](https://hanabrand.cz/temp/dp/struktura-aplikace-jarvis-app.png)

Zprovozněná aplikace má následující kořenovou adresářovou a souborovou strukturu:
- app/ - konfigurační soubory, customizace systému (pomocí přepisování tříd a šablon),
- log/ - ukládání logů,
- temp/ - dočasné soubory (cache, doctrine proxy entity),
- vendor/ - nainstalované balíčky (závislosti) pomocí nástroje Composer,
- www/ - veřejně dostupné soubory (média, soubory šablon),
- .gitignore - konfigurace ignorovaných souborů GIT,
- composer.json - konfigurace závislostí aplikace,
- composer.lock - zámek verzí závislostí,
- init.php - inicializace aplikace,
- jarvis - přístupový bod konzolových příkazů,
- readme.md - informace o aplikaci.

## Modelová vrstva
Modelová vrstva aplikace obsahuje samotné entity, repositáře a kontejnery. Tato vrstva je obsažena v jádře systému a využívají ji všechny moduly společně.

### Entity
V aplikaci se využívá objektově relační mapování za pomocí Doctrine 2  a tudíž je nutné každou relaci v databázi definovat jako entitu v podobě třídy.  Každá entita definuje modelové schéma pomocí anotačního zápisu. Tento anotační zápis je za pomocí Doctrine 2 následně transformován na strukturu relace databáze.
Entity v systému tedy definují strukturu relací i datové typy a entita (objekt) je pak nosičem stejných informací, jako je záznam v databázi. Při ukládání stavu entit jsou změny v entitách (objektech) uloženy do databáze.

#### Seznam entit, které obsahuje balíček Core:
- Address - adresa,
- Country - země,
- Image - obrázek,
- Language - jazyk,
- Menu - menu,
- MenuPage - stránka menu,
- MessageTemplate - šablona zpráv,
- Metadata - meta tagy,
- Route - stránka,
- User - uživatel,
- UserGroup - uživatelská skupina,
- UserRole - uživatelská role,
- UserRoleResource - oprávnění uživatelské role.

#### Seznam entit, které obsahuje balíček CMS:
- Article - článek,
- ArticleCategory - kategorie článků,
- ArticleImage - obrázek článku.

#### Seznam entit, které obsahuje balíček Shop:
- Currency - měna,
- Coupon - slevový kupón,
- Manufacturer - výrobce,
- Order - objednávka,
- OrderProduct - produkt objednávky,
- OrderProductAttribute - atribut produktu objednávky,
- OrderState - stav objednávky,
- Payment - platba,
- PaymentMethod - způsob platby,
- PaymentMethodType - typ způsobu platby,
- PaymentState - stav platby,
- PriceLevel - cenová úroveň,
- Product - produkt,
- ProductCategory - kategorie produktu,
- ProductComment - komentář k produktu,
- ProductImage - obrázek produktu,
- ProductParameter - parametr produktu,
- ProductPrice - cena produktu,
- ProductRate - hodnocení produktu,
- ProductRateImage - obrázek hodnocení produktu,
- ProductState - stav produktu,
- Shipping - doprava,
- ShippingMethod - způsob dopravy
- ShippingMethodType - typ způsobu dopravy,
- ShippingState - stav dopravy,
- Tax - daň,
- Warehouse - sklad,
- WarehouseProduct - produkt na skladě.

### Repositáře
Každá entita má v systému vytvořený svůj vlastní repositář, který rozšiřuje funkcionalitu základního ,,EntityRepository". Díky tomu je možné jednoduše definovat vlastní speciální metody pro načítání entit z databáze přímo do konkrétních repositářů.

### Kontejnery
Ke každé entitě existuje i kontejner stejně jako existuje ke každé entitě repositář. Tento kontejner je definován jako služba (jeho instanci tedy poskytuje framework prostřednictvím DI kontejneru aplikace). Kontejner jako takový usnadňuje práci tím způsobem, že sám obsahuje instance důležitých tříd pro práci s entitami a místo importu několika různých tříd se provede pouze import instance tohoto kontejneru (přes DI kontejner).

**Samotný kontejner je schopen poskytnout:**
- název entity ke které se vztahuje,
- instanci manažera entit (řídí načítáním ukládání a mazání dat v úložišti - databázi),
- instanci repositáře entity,
- novou instanci entity.

### Fasády
Jelikož entita je sama o sobě pouze nosičem informací a neměla by obsahovat žádnou složitější logiku (např.: metody pro načtení všech obrázků produktu spolu se všemi obrázky všech variant produktu), byly vytvořeny fasády, ve kterých je možné definovat tyto pokročilé metody. Výhodou tohoto řešení je čisté oddělení informací uložených v entitě od pokročilých metod.

## Funkcionality systému
Systém obsahuje spoustu funkcionality. V této sekci jsou popsány ty nejdůležitější a nejvíce zajímavé.

### Systémová oprávnění
Veškerá funkcionalita v administrační části systému a většina funkcionality v modulu Front je podmíněna příslušným oprávněním. Ty jsou spravovány v administrační části systému. Lze tak uživatelským rolím povolit oprávnění k příslušným akcím. Kontrola oprávnění je potlačena pouze v případě, že je požadavek spuštěn pomocí konzolového příkazu.

#### Uživatelské role
Uživatelská role slouží k definování systémových rolí uživatelů. Každému uživateli lze přiřadit právě jednu z těchto rolí.

#### Zdroje oprávnění
Zdroje oprávnění slouží k definici konkrétního oprávnění pro uskutečnění konkrétní akce v systému. Například oprávnění do administrační sekce, oprávnění k editaci produktů, oprávnění pro přístup do uživatelské sekce, atd.

### Asynchronní zpracování obrázků
Pro zobrazování obrázků je používáno asynchronní zpracování. To znamená, že žádný obrázek v obsahové části systému není zobrazen v originální podobě, místo toho se zobrazí systémem zpracovaný obrázek.

![Vývojový diagram procesu asynchronního generování obrázků, zdroj: vlastní zpracování || width=0.75\textwidth](https://hanabrand.cz/temp/dp/generovani-obrazku-2.png?2)

Obrázek je nejprve v originální podobě nahrán na server, následně až při jeho zobrazení jej systém upraví do požadované formy. Ke zpracování obrázku pak dochází až při samotnému HTTP požadavku, kdy se prohlížeč pokusí stáhnout obsah (obrázek) na konkrétní URL, kterou pro vygeneroval systém. V této URL se nachází zakódované informace o tom, jak má být obrázek konkrétně zpracován. Pokud se obrázek v této formě na serveru nenachází, dojde ke spuštění úlohy systému, která obrázek upraví. Pro zpracovávání obrázků se používá standardní knihovna pro zpracovávání obrázků v Nette Framework.

### Automatické sestavování formulářů

Vytváření formulářů pro úpravy entit je zdlouhavé a díky velkému množství entit v systému i nepříliš zábavné. Proto byl vytvořen automatický generátor formulářů entit, který formuláře pro entity automaticky sestaví.

![Ukázka automaticky vygenerovaného formuláře pro úpravu měny, zdroj: administrační rozhraní Jarvis](https://hanabrand.cz/temp/dp/formular-automaticky.png?1)

Při zobrazení editace entity tedy stačí pouze nastavit, které vlastnosti entity nemají být zobrazeny, které jsou pouze pro čtení a generátor automaticky sestaví formulář pro úpravu entity. Při úpravě entity (změně její struktury) je pak formulář zcela automaticky sestaven pro aktuální strukturu entity. Logika mapování formulářů navíc dokáže namapovat entity na vygenerovaný formulář i zpět pro následnou validaci a uložení entity.
Popisky polí se vytváření pomocí překladače, popisek každého pole tedy lze pohodlně lokalizovat.

### Export entit do Elasticsearch

Kvůli tomu, že například pro výpis a filtrování produktů v kategoriích pro účely modulu Front je využíváno fulltextového vyhledávání pomocí Elasticsearch, je nutné entity (např. produkty) do Elasticsearch exportovat.

Toho se docíleno tím, že na akci uložení entity do databáze pomocí manažera entit (který se stará o ukládání a načítání entit z databáze) je navázána akce, kdy se spouští logika exportéru.
Jeho úkolem je detekovat, zda je povoleno danou entitu exportovat, která data se v entitě změnila, zda tyto změny jsou z pohledu exportu do Elasticsearch pro další použití podstatná a případně zaregistrovat do fronty (RabbitMQ) pro zpracování exportu.

![Export entity do Elasticsearch, zdroj: vlastní zpracování || width=0.5\textwidth](https://hanabrand.cz/temp/dp/Export-entit-do-Elasticsearch.png?2)

Samotný export je následně zpracován v paralelním vlákně, kde se exportér pokusí načíst entitu z databáze a pokud se nepodaří entitu načíst, došlo k jejímu odstranění a exportér odešle požadavek na Elasticsearch na smazání indexu. Pokud dojde k načtení entity z databáze, je entita dehydratována do podoby asociativního pole a odeslána do Elasticsearch k zaindexování.

### Import entit z Elasticsearch
Na základě vyhledávání v Elasticsearch jsou systému nazpět navrácena data, které indexy splňují kritéria dotazu vyhledávání. Aby nemuselo docházet k opětovnému načtení entit z databáze, bylo vytvořena logika pro hydrataci výsledků navrácených z Elasticsearch do plnohodnotných entit. S těmito entitami pak lze pracovat stejně, jako kdyby tyto entity byly načteny pomocí manažera entit z databáze.

![Import entity z Elasticsearch, zdroj: vlastní zpracování || width=0.5\textwidth](https://hanabrand.cz/temp/dp/Import-entit-do-Elasticsearch.png)

### Lokalizace
Lokalizace systému je realizovaná na úrovni jazyků a měn. Administrátoři mají k dispozici nadefinovat jazyk a měny, které bude systém používat a vždy zvolí jeden jazyk a jednu měnu jako hlavní (výchozí). Výchozím jazykem celého systému je ve výchozím stavu angličtina, měna ve výchozím stavu není definovaná žádná.

Pokud je pak entita přeložitelná (existuje entita překladu konkrétní entity) je formulář pro úpravu entity automaticky rozšířen o překladová pole, které překládají vlastnosti entity do konkrétního jazyku.

![Formulář úpravy článku s překladem, zdroj: administrační rozhraní Jarvis](https://hanabrand.cz/temp/dp/formular-jazyky.png?1)

U cen produktů při přidání nové měny do systému dojde k automatickému rozšíření formuláře pro definici cen produktu i o definici do této měny. Administrátor má tedy možnost definovat cenu produktu v dané měně pro konkrétní cenovou hladinu. Pokud nejsou ceny v této měně definovány, dochází k automatickému přepočtu podle kurzu České Národní Banky. Pokud není definována cena pro konkrétní cenovou hladinu, dojde k automatickému přepočtu podle konfigurace cenové hladiny (ta udává o kolik procent bude cena snížena oproti základní cenové hladině - v základní cenové hladině pro základní měnu musí být cena definována).

![Konfigurace cen produktu, zdroj: administrační rozhraní Jarvis](https://hanabrand.cz/temp/dp/ceny-produktu.png?2)

Návštěvník má poté možnost přepnout si dostupné rozhraní do některého z nabízených jazyků a měn.

### Vytváření URL adres
Vytváření URL adres pro moduly Admin a Robot je realizováno pomocí jednoduchého statického routeru.

Pro modul Front jsou URL adresy sestavovány za pomocí Route entit. Ty se jako zbylé entity ukládají do databáze a systém díky nim dokáže obousměrně překládat mezi URL a akcí konkrétního presenteru. To má za následek, že entitám lze definovat uživatelsky přívětivé URL adresy.

Route entity jsou generovány automaticky na pozadí při manipulacích s ostatními entitami v systému, které podporují routování (implementují rozhraní "IRoutable").

Například, pokud je vytvořena entita Article (entita článku - podporuje routování), dojde i k automatickému vytvoření entity Route, která pomocí reference odkazuje na entitu článku. Jako URL adresa slouží název článku, který je převeden do podoby pro použití v URL adrese. Pokud je daný článek upraven (a změní se například jeho název, který má podstatný vliv na tvorbu URL adresy), nedojde k aktualizaci entity Route, ale je vytvořena zcela nová a stará upravena tak, že již neodkazuje na entitu článku, ale na novou Route entitu. Výsledkem této funkcionality je automatické přesměrování starších URL adres na novou (které mohou být již zaindexovány vyhledávači nebo na ně mohou odkazovat statické odkazy). Díky tomu je také zabráněno duplikaci stejného obsahu na více různých URL adresách, což má neblahý vliv na SEO.

#### Entity systému, které vytvářejí URL adresy:
- Article (článek),
- Page (stránka),
- Product (produkt).

Entita Page (stránka) umožňuje vytvořit buď prázdnou stránku, jejíž zobrazení se složí z výpisu konkrétních modulů nebo výpis kategorie článků či produktů. 

### Administrační rozhraní
Administrační rozhraní systému se nachází na adrese "<doména>/administration". Pro vstup do administrace je nutné mít vytvořený uživatelský účet, kterému se přiřazena role s dostatečným oprávněním pro vstup do administrace. Pokud uživatel není přihlášen, je mu zobrazen formulář pro přihlášení.

![Přihlášení do administračního rozhraní systému, zdroj: administrační rozhraní Jarvis](https://hanabrand.cz/temp/dp/administrace-prihlaseni-0.jpg)

Pro zpestření zobrazení přihlašovací stránky je při každém jejím zobrazení načten náhodný obrázek za pomocí veřejně dostupné služby Unsplash Source.

![Přihlášení do administračního rozhraní systému po změně obrázku, zdroj: administrační rozhraní Jarvis](https://hanabrand.cz/temp/dp/administrace-prihlaseni-2.jpg)

Po přihlášení je uživatel přesměrován již do plnohodnotného uživatelského rozhraní, konkrétně na nástěnku systému, kde vidí sumarizaci nejdůležitějších informací. 

![Nástěnka administračního rozhraní systému, zdroj: administrační rozhraní Jarvis](https://hanabrand.cz/temp/dp/administrace-dashboard.png)

Uživatel má v administraci možnost administrovat veškeré entity, které obsahuje systém a ke kterým má oprávnění editace. Může tedy například administrovat produkty, objednávky, uživatele,  a další entity.

Celé administrační rozhraní je navrženo tak, aby bylo pohodlně administrovatelné například z mobilního telefonu nebo tabletu - šablona administrace je tedy plně responzivní.

![Nástěnka administračního rozhraní systému, zdroj: vlastní zpracování](https://hanabrand.cz/temp/dp/responsivita.png)

### Uživatelské parametry
V administrační sekci lze definovat uživatelské parametry, které reprezentují konkrétní vlastnosti entit v systému a tyto vlastnosti těmto entitám přiřadit. Každý parametr musí být definovaný konkrétním typem, přičemž na výběr je z možností:
- číslo (number),
- textový řetězec (string),
- výběr stavu pravda / nepravda (boolean),
- výběr jedné z hodnot (select),
- výběr více hodnot (multiselect).

Takto lze například entitě produktu definovat vlastnost "velikost" s typem výběru jedné z hodnot "S", "M", "L".

![Ukázka výpisu definovaných uživatelských parametrů, zdroj: administrační rozhraní Jarvis](https://hanabrand.cz/temp/dp/parametry.png)

Tato funkcionalita má obrovskou výhodu při customizaci řešení, kdy konkrétní úpravy ve vlastnostech entit dle potřeb zákazníka se nemusí řešit na úrovni úpravy zdrojového kódu základního modelu entity, ale postačí vhodně nakonfigurovat uživatelské parametry a dle potřeby upravit například pouze šablonu pro jejich speciální výpis.

Navíc této funkcionality bylo využito i při výpisu variant produktů, kdy jsou jednotlivé varianty od sebe primárně odlišeny v rozdílných hodnotách uživatelských parametrů (vlastnostech).

### Varianty produktů
Ke každému produktu mohou být definovány jeho varianty. Ty jsou reprezentovány pomocí samostatných entit produktů, které ale odkazují na entitu hlavního produktu jako na svého rodiče.

To má svoji výhodu v tom, že takováto varianta může obsahovat svoje vlastní obrázky, parametry, dostupnost i ceny stejně, jako plnohodnotný produkt a na tuto variantu lze pak odkazovat stejně, jako na produkt.

Jednotlivé varianty produktů se pro zákaznický výběr detekují na základě odlišností v hodnotách uživatelských parametrů.

![Ukázka výběru varianty produktu ve výchozí šabloně detailu produktu, zdroj: systém Jarvis](https://hanabrand.cz/temp/dp/vyber-varianty-produktu.png)

### Customizace systému
Customizaci, neboli specifická úprava systému dle přání zákazníka, lze provádět v systému dvojím způsobem:
- na úrovni přepisování služeb,
- na úrovni přepisování šablon.

Ani jeden z uvedených způsobů nezasahuje do systému tak, že by přímo přepisovat zdrojový kód samotného systému, ale jsou v obou případech vytvořeny jako externí soubory oddělené od adresářů zdrojových kódů systému, ale ten je automaticky načítá a pracuje s nimi.

### Přepisování služeb
Nette Framework umožňuje pomocí konfiguračních souborů NEON přepisovat již dříve definované konfigurace. V systému konfigurační soubory vyhledává knihovna Nette Config Finder, která je nastavena tak, aby nejprve vyhledávala konfigurační soubory v adresáři "vendor/", tedy aby načetla konfigurační soubory nainstalovaných balíčků a teprve poté vyhledá konfigurační soubory v adresáři "app/".

Autorem tohoto rozšíření jsem já sám, je open-source a lze jej nainstalovat pomocí nástroje Composer.

![Open-source rozšíření Nette Config Finder, zdroj: github.com](https://hanabrand.cz/temp/dp/nette-config-finder.png)

Automatické vyhledávání konfiguračních souborů a jejich import do systému má za následek, že při inicializaci systému ve spouštěcím souboru je nejprve načtena výchozí konfigurace systému z balíčku Jarvis Core (a dalších balíčků s konfigurací) a teprve následně je načtena konfigurace z adresáře "app/config", tedy konkrétní konfigurace pro aktuální instanci systému.

Konfigurace z adresáře "app/config", přepisuje základní konfiguraci nainstalovaných balíčků a díky tomu lze donutit systém využít mimo konfiguračních parametrů i jiné služby, než které standardně systém používá. Je tedy možné měnit základní logiky systému. 

### Přepisování šablon
Komponentový model systému je rozšířen o logiku vyhledání šablony pro konkrétní komponentu. Tato logika se nejprve pokusí vyhledat šablonu konkrétní komponenty v adresáři "app/" na základě předem jasně definovaného tvaru cesty k náhradní šabloně a pokus není nalezena náhradní šablona, využije se výchozí systémová.

![Ukázka výchozí šablony výpisu produktů, zdroj: systém Jarvis](https://hanabrand.cz/temp/dp/sablona-kategorie.png)

Tato funkcionalita byla vytvořena hlavně z toho důvodu, aby samotný systém obsahovat veškeré potřebné šablony a byl díky tomu samostatně provozuschopný bez dodání jakýchkoliv dalších součástí a aby vizuální customizace systému neprobíhala formou přepisu systémových šablon.


### Moduly
Moduly slouží pro zobrazení libovolných funkčních bloků v modulu Front, tedy v sekci pro zákazníky obchodu. Jejich správa probíhá v administraci systému a lze pomocí nich například zajistit výpis menu, obsahu košíku, libovolného článku a to na jakékoliv předem definované pozici pro vykreslení modulu.
Moduly je možné ošetřit dalšími podmínkami, například, zda je povolen výpis modulu na detailu konkrétního produktu, článku nebo stránky.
Hlavní myšlenkou funkcionality modulů je usnadnění práce s modifikací stránek. Například, pokud se obchod rozhodne, že potřebuje dovolenou, nemusí se upravovat nic ve zdrojovém kódu systému, ale pouze se pro tuto informaci vytvoří modul s příslušnou informací a publikuje na dané pozici.
![Modul s informací o plánované inventuře, zdroj: systém Jarvis](https://hanabrand.cz/temp/dp/modul-inventura.png)

## Redesign webu
Jeden z živnostníkových požadavků na nové řešení byla inovace vizuálního vzhledu e-shopu. Po upřesnění grafických požadavků byly vytvořeny grafické návrhy pro připravované řešení.


### Úvodní stránka
Úvodní stránka je velmi důležitým prvkem e-shopu. Měly by se na ní objevit ty nejdůležitější informace, které můžeme zákazníkům poskytnout. Grafický návrh úvodní stránky byl vytvořen tak, že prvním prvkem je hlavička stránek. Ta obsahuje logo e-shopu, výpis hlavního menu, odkaz pro přihlášení uživatele a košík. Hlavička si drží fixní pozici vůči oknu prohlížeče a při pohybu na stránce dolů ji tedy bude návštěvník mít stále na očích.
![Hlavička webu, zdroj: vlastní zpracování](https://hanabrand.cz/temp/dp/gn/home-titulka.png)

Hned pod menu se na nachází prezentace skupiny vybraných produktů. Měly by to být ty absolutně nejprodávanější, protože je zákazník vidí jako úplně první a proto by se zde měly nacházet právě ty nejoblíbenější produkty. Tuto část je vhodné animovat, například přechodem mezi prezentacemi jednotlivých produktů a vložením efektní fotky na pozadí prezentace, abychom v návštěvníkovi evokovali pocit živosti celého webu.
![Produktová prezentace na úvodní stránce, zdroj: vlastní zpracování](https://hanabrand.cz/temp/dp/gn/home-slideshow.png)

Protože se do prezentace vejde pouze omezené množství produktů, byla vytvořena samostatná sekce nejoblíbenějších produktů ještě pod prezentací. Zde se může zobrazit zbytek oblíbených produktů, dle grafického návrhu například právě doporučených 9. Jejich zobrazení bude probíhat také formou prezentace po 3 produktech v řádku, ale tato prezentace již nebude tak bohatá na efekty, jak tomu je u hlavní prezentace, Zároveň bude mít návštěvník v tomto zobrazení produktů listovat.
![Produktová prezentace nejoblíbenějších produktů, zdroj: vlastní zpracování](https://hanabrand.cz/temp/dp/gn/home-oblibene.png)

Následuje výpis vybraných referencí produktů od zákazníků. Je vhodné, aby každá reference obsahovala i vlastní fotografii, ta se může použít například přímo od zákazníka nebo využít fotografie produktu, pokud reference neobsahuje vlastní.
![Výpis produktových kategorií, zdroj: vlastní zpracování](https://hanabrand.cz/temp/dp/gn/home-kategorie.png)

Pod výpisem referencí se nachází výpis oblíbených kategorií e-shopu, přičemž každá kategorie obsahuje vlastní fotografii.
![Výpis vybraných referencí, zdroj: vlastní zpracování](https://hanabrand.cz/temp/dp/gn/home-reference.png)

Pokud návštěvník pokračuje i pod výpis nejoblíbenějších kategorií, pravděpodobně není dostatečně přesvědčený k zobrazení detailu zobrazeného produktu či kategorie, a nebo míří k informacím uvedeným v patičce. Z toho důvodu je v grafickém návrhu ještě jednou vytvořen výpis dalších oblíbených produktů, aby se zvýšila šance na motivaci návštěvníka k zobrazení detailu některého ze zobrazených produktů.
![Produktová prezentace oblíbených produktů, zdroj: vlastní zpracování](https://hanabrand.cz/temp/dp/gn/home-oblibene2.png)

V nejspodnější části stránky se nachází výpis patičky webu. Ta obsahuje logo e-shopu, výpis menu, odkazy na sociální sítě a formulář pro přihlášení k odběru novinek.
![Patička webu, zdroj: vlastní zpracování](https://hanabrand.cz/temp/dp/gn/home-paticka.png)

### Detail kategorie
Detail výpisu produktové kategorie obsahuje stejnou hlavičku a patičku jako úvodní stránka. Místo prezentace nejoblíbenějších produktů je ale zobrazena lišta s názvem kategorie a fotografií kategorie na jejím pozadí. To dodá stránce opět pocit živosti, jinak by totiž byla stránka příliš jednotvárná.
![Hlavička kategorie produktů, zdroj: vlastní zpracování](https://hanabrand.cz/temp/dp/gn/category-header.png)

Následně je celá stránka rozdělena na dva sloupce. V tom levém menším a na první pohled méně patrném se nachází výpis podkategorií a filtrů produktů.
Naopak v tom pravém větším se nachází výpis nalezených produktů v dané kategorii, případně ty, které splňují filtrační podmínky. V grafickém návrhu jsou naznačeny jak dostupné, tak nedostupné produkty. Nad samotným výpisem produktů se nacházení parametry ovlivňující způsob výpisu produktů, tedy řazení produktů a limit počet zobrazených produktů.
![Výpis produktové kategorie s filtry a podkategoriemi, zdroj: vlastní zpracování](https://hanabrand.cz/temp/dp/gn/category-listing.png)

### Detail produktu
Grafický návrh detailu konkrétního produktu obsahuje opět stejnou hlavičku a patičku jako úvodní stránka. Hned pod hlavičkou webu se nachází výpis informací o daném produktu. Ten je rozdělený na dvě přibližně stejně velké části. V levé části se nachází fotografie produktu i s naznačenou ikonou pro zvětšení fotografie do plné velikosti. V pravé části se nachází možnost vložení produktu do košíku s výpisem textových informací o produktu, konkrétně:
- název,
- cena,
- výběr varianty,
- popis,
- parametry,
- hodnocení.
![Hlavní informace o produktu, zdroj: vlastní zpracování](https://hanabrand.cz/temp/dp/gn/detail-main.png?2)

Pod výpisem hlavních informací o produktu je výpis souvisejících produktů. Tím je myšlen například výpis produktů ze stejné kategorie nebo výpis produktů, které zákazníci zakoupili spolu s tímto produktem.
![Výpis souvisejících produktů, zdroj: vlastní zpracování](https://hanabrand.cz/temp/dp/gn/detail-related.png?3)

## Zhodnocení realizace
Dle historie repositářů systému byly první změny nahrány dne 29.6.2018 a od té doby bylo vytvořeno celkem 373 změn.
![Historie změn v repositářích systému, zdroj: nástroj  Contribution Summarizer](https://hanabrand.cz/temp/dp/commity.png)

Odhadem se projekt nachází zhruba v polovině a konstatovat, že jeho současná podoba tvoří základ pro vytvoření plnohodnotné e-commerce platformy. V současném stavu se tedy jedná zatím o prototyp této platformy.

### Statická analýza kódu
Nad zdrojovými kódy vytvořené platformy systému byla provedena statická analýza kódu jako nad současně používaným řešením.
![Statická analýza zdrojových kódů systému Jarvis, zdroj: nástroj PhpMetrics](https://hanabrand.cz/temp/dp/stat-analyza-jarvis.png)

Po porovnání výsledků testu s výsledky testu aktuálně používaného řešení, je patrné, že se přibližně dvojnásobně navýšil počet řádků ve zdrojovém kódu systému a to na počet 30 884. Také se zhruba 5,5× navýšil celkový počet všech tříd, konkrétně z počtu 68 na 382.

Mírně se zvýšil počet varování na prohřešky v kódu, konkrétně z počtu 67 na 78, ale díky vyššímu počtu tříd klesl celkový průměrný počet chyb na třídu z 0,87 na 0,09. Také se snížil průměr hodnoty cyklomatické komplexnosti na třídu a to z 25,15 na hodnotu 2,94.

Z porovnání výsledků testů je patrné, že kvalita zdrojového kódu připravovaného řešení vzhledem ke svému rozsahu je výrazně vyšší, než kvalita zdrojového kódu současně používaného řešení.

Očekává se, že v průběhu další práce na projektu se zcela eliminují nedostatky objevené těmito testy. Bylo by vhodné tyto testy provádět častěji a postupem realizace nesnižovat kvalitu zdrojového kódu systému a snažit se kvalitu spíše zvyšovat.

### Plánovaný rozvoj
Protože celý projekt se nachází zhruba v polovině svého rozsahu, bude nutné naplánovat další kroky k dokončení celé realizace pro vytvoření plnohodnotného e-commerce řešení.


Namátkou těmito kroky jsou:
- eliminovat většinu varování ze statické analýzy kódu,
- dokončit business logiku nákupního procesu,
- vytvořit business logiku rozšíření (pluginů) systému,
- dokončit realizaci všech požadovaných funkčností od živnostníka,
- vytvořit exportní a importní funkcionality,
- vytvořit 4. modul pro správu systému pomocí API,
- provézt bezpečnostní audit systému a eliminovat případné nedostatky,
- a další.

![4 Moduly systému, zdroj: vlastní zpracování || width=0.75\textwidth](https://hanabrand.cz/temp/dp/4-moduly.png?1)

Po dokončení realizace celého e-commerce řešení bude také nutné realizovat potřební kroky k samotnému zprovoznění řešení pro živnostníka. Bude tedy například nutná instalace systému na vhodných server (tedy najít vhodného poskytovatele hostingových služeb), nakonfigurovat systém, customizovat ho (připravit a nastavit šablony zákaznické sekce e-shopu), a provést migrace dat ze současného řešení. Před samotným spuštěním bude samozřejmě nutné, aby bylo řešení dostatečně otestováno i samotným živnostníkem.

### Finanční zhodnocení
Jak bylo již zmíněno, k prvnímu nahrání změn do repositářů systému došlo 29.6.2018. Od té doby bylo vytvořeno celkem 373 změn a realizací jsem strávil přibližně 231 hodin. 

Jelikož celé řešení je postaveno na technologiích, které jsou nabízeny zdarma, nebo jako open-source, jedinou nákladovou položkou v realizaci je strávený čas nad projektem. Pokud tedy budeme uvažovat o sazbě 500 Kč/h, současné náklady na vytvoření tohoto prototypu e-commerce platformy jsou 115 500 Kč.

Připravované řešení je v porovnání s aktuálním výrazně komplexnější a díky tomu má i vyšší nároky na prostředí, ve kterém bude provozován. Kvůli tomu bude nutné při zprovoznění řešení uvažovat i o dodatečných nákladech za využívané hostingové služby (pronájem výkonnějšího serveru).
